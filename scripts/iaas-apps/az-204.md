# IaaS Apps - AZ-204 Exam Connection Narration Script

## Introduction
Now let's discuss how this lab relates to the AZ-204 exam objectives. Understanding IaaS deployments is crucial for the "Implement IaaS solutions" section of the exam.

## Exam Objective: Provision Virtual Machines

This lab directly addresses several AZ-204 exam objectives related to provisioning and configuring virtual machines.

### Creating VMs Using Azure CLI
We used the `az vm create` command to provision a Windows Server virtual machine. On the exam, you should know how to:
- Specify the correct image using publisher, offer, SKU, and version
- Select appropriate VM sizes for different workloads
- Configure authentication with username and password or SSH keys
- Attach network resources including public IPs and DNS names

The command we used demonstrates all these concepts:
```
az vm create -l $location -g $rg -n app01 --image MicrosoftWindowsServer:WindowsServer:2022-datacenter-core-g2:latest --size Standard_D2s_v5 --admin-username labsadmin --public-ip-address-dns-name myapp-vm-12345 --admin-password 'MyVMPassword123!'
```

### Selecting Appropriate VM Images
We explored how to list and filter available VM images using:
```
az vm image list-skus
```

Understanding the publisher-offer-SKU hierarchy is important for the exam. You should be able to find the right image for different scenarios, whether it's Windows Server, Ubuntu, or other distributions.

### VM Sizing
We used the Standard_D2s_v5 size, which is a general-purpose VM from the Dv5 series. For the exam, know:
- Different VM series and their use cases (general purpose, compute optimized, memory optimized)
- How to select appropriate sizes based on application requirements
- How to resize VMs after creation

## Exam Objective: Configure VMs for Remote Access

We configured the VM for Remote Desktop access by:
- Creating a public IP address
- Assigning a DNS name for easier connectivity
- Configuring Network Security Group rules to allow RDP traffic

For the exam, understand:
- How to configure NSG rules for different protocols (RDP, SSH, HTTP, HTTPS)
- The difference between inbound and outbound rules
- Priority ordering and rule evaluation

## Exam Objective: Create and Configure Azure App Service

While this lab focuses on IaaS, it's important to understand when IaaS is appropriate versus App Service.

### IaaS vs PaaS Decision Criteria
We deployed this application to IaaS because it:
- Uses .NET Framework (not .NET Core), which requires Windows Server
- Needs specific IIS configuration
- Requires full control over the operating system

For the exam, know when to choose IaaS versus App Service:
- IaaS: Legacy applications, specific OS requirements, full control needed
- App Service: Modern applications, PaaS benefits, less management overhead

## Exam Objective: Configure Networking for Application Deployment

This lab covered several networking concepts important for the exam:

### Virtual Network Integration
When we created the VM, Azure automatically created:
- A virtual network
- A subnet
- A network interface
- A network security group

Understanding these components and how they interconnect is crucial.

### Service Endpoints
We configured a service endpoint for Microsoft.Sql on the VM's subnet. Service endpoints:
- Extend your VNet identity to Azure services
- Improve security by keeping traffic on the Azure backbone
- Are required for VNet rules on some Azure services

For the exam, know:
- How to configure service endpoints
- The difference between service endpoints and private endpoints
- Which Azure services support service endpoints

### Network Security Groups
We configured NSG rules to allow HTTP traffic to our application. For the exam, understand:
- How to create and modify NSG rules
- Source and destination specifications
- Port ranges and protocols
- Rule priorities and evaluation order

## Exam Objective: Implement Azure SQL Solutions

We created and configured Azure SQL Database in this lab.

### Creating SQL Resources
We used two commands:
```
az sql server create -g $rg -l $location -n $server -u sqladmin -p 'MySecurePassword123!'
az sql db create -g $rg -n $database -s $server --no-wait
```

For the exam, understand:
- The hierarchy: SQL Server (logical server) contains SQL Databases
- Pricing tiers and service objectives
- Backup and restore options
- High availability configurations

### Firewall and Network Configuration
We configured VNet rules to allow VM access to the SQL Database. The exam may test:
- Firewall rules based on IP addresses
- Virtual network rules
- Private endpoints for SQL Database
- Connection strings and authentication methods

### Connection Strings
We modified the application's connection string to connect to Azure SQL Database:
```
Server=myserver12345.database.windows.net;Database=signup;User Id=sqladmin;Password=MySecurePassword123!;Connect Timeout=10;
```

For the exam, know:
- Connection string formats for different scenarios
- SQL authentication vs Azure AD authentication
- How to store connection strings securely (Key Vault, App Configuration)

## Exam Objective: Deploy Applications to Virtual Machines

We deployed a web application by:
- Installing prerequisites (.NET Framework, IIS)
- Installing the application package
- Configuring application settings

### Configuration Management
We manually configured the application, but for the exam, understand automated approaches:
- Custom Script Extension for VMs
- Cloud-init for Linux VMs
- PowerShell DSC for Windows configuration
- ARM templates and Bicep for infrastructure as code

### Application Configuration
We edited configuration files directly on the VM. In production and on the exam, consider:
- Azure App Configuration for centralized settings
- Azure Key Vault for secrets and connection strings
- Environment variables
- Managed identities for authentication

## Exam Objective: Monitor and Troubleshoot IaaS Solutions

While not covered in depth in this lab, the exam will test:
- Azure Monitor and VM insights
- Boot diagnostics
- Network Watcher for connectivity troubleshooting
- Application Insights for application monitoring

## Key Exam Tips

### Command Line Knowledge
Be comfortable with both Azure CLI and PowerShell. The exam may present either syntax.

### Resource Dependencies
Understand which resources depend on others:
- VMs require VNets, NICs, and disks
- VNet rules require service endpoints
- Applications require proper networking and authentication

### Security Best Practices
The exam will test security knowledge:
- Use Managed Identities instead of credentials when possible
- Store secrets in Key Vault, not in code or configuration files
- Apply least-privilege access using RBAC
- Use private endpoints for sensitive workloads

### Cost Optimization
Consider cost implications:
- Shutting down VMs when not needed
- Right-sizing VM instances
- Using appropriate SQL Database tiers
- Deallocating vs stopping VMs

## Common Exam Scenarios

### Scenario 1: Migration from On-Premises
"Your organization needs to migrate a legacy ASP.NET application from on-premises to Azure. What's your approach?"

Answer would involve IaaS VMs, Azure SQL Database, VNet connectivity, and possibly ExpressRoute or VPN.

### Scenario 2: Secure Connectivity
"An application on a VM needs to access Azure SQL Database. How do you secure this connection?"

Answer: Service endpoints or private endpoints, VNet rules, no public IP access to SQL.

### Scenario 3: Application Configuration
"How should connection strings be managed for VMs?"

Answer: Azure Key Vault with Managed Identity, not hard-coded in configuration files.

## Study Recommendations

To prepare for IaaS-related exam questions:

1. Practice creating VMs using both Portal and CLI
2. Experiment with different VM sizes and images
3. Configure network security groups and service endpoints
4. Deploy applications manually and using extensions
5. Practice Azure SQL Database creation and networking
6. Understand when to use IaaS vs PaaS solutions

## Exam Question Formats

Expect these question types:
- Multiple choice: "Which VM series is optimized for memory-intensive workloads?"
- Scenario-based: "Given requirements X, Y, Z, what's the best deployment approach?"
- Command completion: "Fill in the blank in this az vm create command"
- Troubleshooting: "The VM can't access SQL Database. What's the likely issue?"

## Related Exam Objectives

This lab also touches on other AZ-204 objectives:
- Implement security (NSGs, authentication)
- Monitor and troubleshoot solutions
- Connect to and consume Azure services
- Implement infrastructure as code

## Conclusion

This IaaS deployment lab provides hands-on experience with several core AZ-204 exam objectives. The key is understanding not just how to create resources, but when to use them, how they interconnect, and best practices for security and configuration.

Remember: The exam tests practical knowledge. Having hands-on experience deploying applications to VMs and configuring Azure SQL Database will help you answer both direct knowledge questions and complex scenarios.

Practice these concepts repeatedly, and you'll be well-prepared for the IaaS sections of the AZ-204 exam.
