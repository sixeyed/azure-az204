# Azure Cache for Redis - AZ-204 Exam Focus

## Exam Relevance

Azure Cache for Redis is an important topic for the AZ-204 exam. You need to understand when to use it, how to configure it, and how to connect applications to it.

## Key Exam Topics

### 1. Redis Overview and Use Cases

For the exam, remember that Redis is:
- An in-memory data store and cache
- Used for improving application performance
- Suitable for non-critical data
- Also supports pub-sub messaging patterns

**Exam tip**: Know when to recommend Redis versus other Azure services like Table Storage, SQL Database, or Cosmos DB.

### 2. Service Tiers and SKUs

Azure Cache for Redis offers different tiers:

**Basic**:
- Single node, no SLA
- No replication or persistence
- Good for development and testing
- Cost-effective for non-critical workloads

**Standard**:
- Two-node primary/replica configuration
- 99.9% SLA
- Automatic failover
- Still no data persistence

**Premium**:
- All Standard features plus:
- Virtual Network support
- Data persistence (RDB and AOF)
- Geo-replication
- Cluster mode for scaling
- 99.95% SLA

**Enterprise**:
- Highest performance and availability
- Additional Redis modules
- Active geo-replication
- 99.99% SLA

**Exam tip**: Understand which features are available in each tier. Questions may ask you to choose the appropriate tier based on requirements.

### 3. Configuration Options

Key configuration settings to know:

**Size**:
- C0-C6 for Basic/Standard (C0 is smallest at 250MB)
- P1-P5 for Premium (starting at 6GB)

**Network Access**:
- Public endpoint by default
- Virtual Network integration for Premium tier
- Firewall rules to restrict access

**Security**:
- TLS encryption (1.0, 1.1, or 1.2)
- Access keys (primary and secondary)
- Redis password authentication
- Optional non-TLS port (not recommended)

**Redis Version**:
- Version 4 or 6 available
- Version 6 recommended for new deployments

**Exam tip**: Know that VNet integration requires Premium tier. This is a common exam scenario.

### 4. Connection Strings

Applications connect to Redis using connection strings with this format:

```
<redis-name>.redis.cache.windows.net:6380,password=<access-key>,ssl=True,abortConnect=False
```

Key components:
- Port 6380 for TLS connections (6379 for non-TLS)
- SSL=True for encrypted connections
- Password from access keys in Portal
- abortConnect=False for resilient connections

**Exam tip**: Know the default ports and the difference between TLS and non-TLS connections.

### 5. Common Redis Commands

Basic commands you should know:

**Data Operations**:
- `SET key value` - Store a value
- `GET key` - Retrieve a value
- `DEL key` - Delete a value
- `EXISTS key` - Check if key exists
- `EXPIRE key seconds` - Set TTL on a key

**Pub-Sub Operations**:
- `PUBLISH channel message` - Send a message
- `SUBSCRIBE channel` - Listen for messages
- `UNSUBSCRIBE channel` - Stop listening

**Management**:
- `INFO` - Get server information
- `FLUSHDB` - Clear current database
- `FLUSHALL` - Clear all databases

**Exam tip**: Questions may include code snippets with these commands. Understand what each does.

### 6. Caching Patterns

Common caching patterns to understand:

**Cache-Aside (Lazy Loading)**:
1. Check cache for data
2. If not found, query database
3. Store result in cache
4. Return data

This is what the Pi application demonstrates.

**Write-Through**:
1. Write to cache
2. Write to database
3. Return success

**Write-Behind**:
1. Write to cache
2. Return success
3. Asynchronously write to database

**Exam tip**: Know when to use each pattern and their trade-offs.

### 7. Data Eviction Policies

When Redis reaches memory limit, it uses eviction policies:

- `noeviction` - Return errors when memory is full
- `allkeys-lru` - Evict least recently used keys
- `allkeys-lfu` - Evict least frequently used keys
- `volatile-lru` - Evict LRU keys with TTL set
- `volatile-lfu` - Evict LFU keys with TTL set
- `volatile-ttl` - Evict keys with shortest TTL
- `allkeys-random` - Evict random keys
- `volatile-random` - Evict random keys with TTL

**Exam tip**: Understand the difference between `allkeys-*` (all keys) and `volatile-*` (only keys with TTL).

### 8. High Availability and Scaling

Important concepts:

**Replication**:
- Standard tier provides primary/replica
- Automatic failover on primary failure
- Read-only access to replicas possible

**Clustering** (Premium only):
- Distribute data across multiple nodes
- Scale horizontally
- Supports up to 10 shards

**Geo-Replication** (Premium):
- Link two Premium caches in different regions
- Primary cache replicates to secondary
- Manual failover for disaster recovery

**Exam tip**: Know that clustering and geo-replication require Premium tier.

### 9. Monitoring and Diagnostics

Key metrics to monitor:

- Cache hits and misses
- Connected clients
- Memory usage
- Server load
- Operations per second
- Evicted keys

Available through:
- Azure Monitor metrics
- Diagnostic logs
- Redis INFO command
- Redis CLI console in Portal

**Exam tip**: Understand how to identify performance issues using these metrics.

### 10. Security Best Practices

For the exam, know these security practices:

- Always use TLS encryption
- Rotate access keys regularly
- Use firewall rules to restrict access
- Use VNet integration for Premium tier
- Disable non-TLS port
- Use Azure Private Link for private connectivity
- Enable Azure Active Directory authentication (in preview)

**Exam tip**: Questions may present scenarios asking for the most secure configuration.

## Common Exam Scenarios

### Scenario 1: Choosing a Cache Solution

**Question type**: When should you use Redis versus other options?

**Use Redis when**:
- Need sub-millisecond latency
- Data is non-critical (can be regenerated)
- Simple key-value storage sufficient
- Need pub-sub messaging
- Want simple, lightweight solution

**Use alternatives when**:
- Need transactional consistency (use SQL Database)
- Need complex queries (use Cosmos DB)
- Need guaranteed message delivery (use Service Bus)
- Need large storage volumes (use Blob Storage)

### Scenario 2: Tier Selection

**Question type**: Which tier meets these requirements?

**Decision factors**:
- SLA requirements → Standard or higher
- VNet integration → Premium
- Data persistence → Premium
- Geo-replication → Premium
- Budget constraints → Basic for non-production

### Scenario 3: Performance Optimization

**Question type**: Application is slow, how to improve?

**Solutions**:
- Implement cache-aside pattern with Redis
- Use appropriate eviction policy
- Scale up to larger size
- Use clustering for horizontal scale (Premium)
- Optimize Redis command patterns

### Scenario 4: Security Requirements

**Question type**: How to secure Redis access?

**Solutions**:
- Enable TLS 1.2
- Use VNet integration (Premium)
- Configure firewall rules
- Use managed identities where possible
- Rotate access keys periodically

## CLI Commands for the Exam

You should be familiar with these `az redis` commands:

```bash
# Create Redis instance
az redis create --name <redis-name> --resource-group <rg-name> --location <location> --sku Basic --vm-size c0

# List Redis instances
az redis list --resource-group <rg-name>

# Get Redis details
az redis show --name <redis-name> --resource-group <rg-name>

# Get access keys
az redis list-keys --name <redis-name> --resource-group <rg-name>

# Regenerate access key
az redis regenerate-keys --name <redis-name> --resource-group <rg-name> --key-type Primary

# Update Redis configuration
az redis update --name <redis-name> --resource-group <rg-name> --set enableNonSslPort=false

# Delete Redis instance
az redis delete --name <redis-name> --resource-group <rg-name>
```

## Code Examples

For the exam, understand how to connect to Redis in code:

**C# Example**:
```csharp
using StackExchange.Redis;

var connectionString = "<redis-name>.redis.cache.windows.net:6380,password=<key>,ssl=True";
var connection = ConnectionMultiplexer.Connect(connectionString);
var db = connection.GetDatabase();

// Set value
db.StringSet("key", "value");

// Get value
var value = db.StringGet("key");

// Publish message
var subscriber = connection.GetSubscriber();
subscriber.Publish("channel", "message");
```

**Exam tip**: You may see similar code in exam questions. Understand the basic operations.

## Summary

For the AZ-204 exam, focus on:
1. When to use Redis versus other services
2. Tier selection based on requirements
3. Configuration options and their implications
4. Connection strings and security
5. Common caching patterns
6. Basic Redis commands
7. High availability and scaling options
8. Monitoring and troubleshooting

Remember: Azure Cache for Redis is all about **performance** and **simplicity**. Use it when you need fast access to non-critical data, and when operational simplicity matters more than advanced features.
