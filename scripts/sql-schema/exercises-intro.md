We've covered how to deploy pre-existing database schemas to Azure SQL Database using Microsoft's data tier application packages - essential for migrating from on-premises SQL Server or deploying packaged applications with their own database structures. Now let's deploy a Bacpac file to Azure.

We'll start by creating a SQL Server where you'll set some variables for the parameters you'll use multiple times, including location, resource group, server name, and database name. You'll create the resource group, server, and specify admin credentials that you'll need later. In the portal you can browse to the server and click the Import Database option to explore the configuration choices. You'll see that you can import a database from a Bacpac file, which is a database backup. The file you import needs to be stored in Azure first, so that's what you'll do next.

Next you'll upload the Bacpac file to Azure Blob Storage. You'll create a storage account which needs a globally unique name with only lowercase characters, then create a container called databases where you can upload files. Azure calls files BLOBs which stands for Binary Large Objects. You'll upload the local Bacpac file to the container using the CLI. In the portal you can find your uploaded Bacpac by opening the resource group and navigating through the storage account to the containers and blob details. The blob will have a URL that includes the storage account name, which is why it needs to be globally unique. You can't download from that address though because by default new blob containers are set to private, so they can only be accessed within Azure.

After uploading the file, you'll import the Bacpac into a new database. You'll create a new database first, and while that's running you can get the details ready for the import. Database imports are a quick way to create a new database from a backup. It's simple to export an on-prem database to a Bacpac file, upload it to Azure, and import it into an Azure SQL database complete with all the data. Bacpacs are an export of database schema and the data together. Dacpacs are a model of database schema without the data, and you can't import from a Dacpac. You'll use the sql db import command which needs admin credentials for the SQL Server, the URL for the file to import from the storage account, a storage account key, and the name of the new database and server. You'll need to generate a Shared Access Signature token which is an authentication token to access the file. This involves a few pieces but the CLI output will help you fix any issues. Creating the database can take a long time, and you can check progress in the portal.

Once the database is created, you'll use the new database by opening it in the portal and using the Query Editor blade. This lets you connect to the database and run SQL commands from the browser. You'll log in with the admin credentials and check that the schema has been deployed. The Bacpac includes some reference data that gets inserted during the import, and you can find it by navigating the schema in the object explorer and running standard SQL statements to query the tables.

For the lab challenge, you'll insert additional data into the assets table that wasn't present in the original Bacpac, then export a Bacpac from the Azure database to see how you would use that file to recreate the data in another instance. When you're done, you'll clean up by deleting the resource group.
