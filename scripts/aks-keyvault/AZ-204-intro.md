Excellent work integrating Key Vault with AKS! This topic covers multiple AZ-204 exam domains and represents a critical security pattern. Let's focus on what you need to know for the certification.

This topic spans containerized solutions for AKS deployment, Azure security for managed identities and Key Vault, and configuration management. Expect questions about secret management patterns, troubleshooting access issues, and choosing the right integration method based on scenario requirements.

Three methods to access Key Vault from containers is a key exam concept that appears frequently. First is the CSI driver approach you just learned, where secrets are mounted as files. This works for any application without code changes and provides automatic rotation polling. Second is direct SDK access where application code calls the Key Vault API directly, which gives maximum flexibility but requires code changes and custom caching and rotation logic. Third is App Service configuration where Key Vault references are automatically injected as environment variables, which is the easiest approach for App Service but not applicable to AKS. Know when to use each approach based on the application requirements presented in the scenario.

System-assigned versus user-assigned managed identities appears on every exam. System-assigned identities are created automatically with the resource and deleted when the resource is deleted. The lifecycle is tied together, making it simple but inflexible if you need to reuse the identity. User-assigned identities are standalone resources that you can assign to multiple services, which is more complex to manage but reusable across different Azure resources. The exam tests when to recommend each type and how to configure them properly.

Key Vault access policies need to be understood thoroughly because they control who can access what. Access policies define which identities can perform which operations: GET, LIST, SET, DELETE for secrets, keys, and certificates. They're identity-centric, meaning you grant permissions to specific Azure AD principals. Know the difference between access policies, which are the classic model with granular per-operation permissions, and Azure RBAC, which is the newer model using standard roles that's easier to manage at scale. Key Vault supports both authorization models, and the exam may ask which to use.

CSI driver architecture may appear in troubleshooting questions about why secrets aren't appearing in pods. The driver runs as a DaemonSet with one pod per node, uses the AKS managed identity to authenticate to Key Vault, fetches secrets on pod startup, and refreshes them periodically with a default interval of every 2 minutes. If secrets aren't appearing, you need to know to check the CSI driver pod logs in the kube-system namespace, verify the access policy grants appropriate permissions to the managed identity, and ensure the SecretProviderClass is correctly configured with the right Key Vault name and tenant ID.

Secret rotation strategies are tested to understand how applications handle configuration updates. The CSI driver automatically refreshes mounted secrets every 2 minutes from Key Vault, but applications must detect file changes and reload their configuration. Some apps support hot reload where they watch for file changes, while others require a pod restart to pick up new values. The exam tests your understanding of this behavior and how to design applications that handle secret rotation gracefully without downtime.

SecretProviderClass configuration appears in implementation questions. You need to know the required fields: keyvaultName for the Key Vault resource name, tenantId for your Azure AD tenant, objects array listing which secrets to mount, and each object needs objectName, objectType, and optionally objectAlias to rename the file. Understanding how to troubleshoot misconfigured SecretProviderClass resources is important.

Throughout our review, we'll compare Key Vault access methods, work through common troubleshooting scenarios about access issues and configuration problems, and explore exam scenarios about multi-environment secret management and audit logging. Master Key Vault integration for secure AKS applications!
