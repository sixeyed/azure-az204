# Cosmos DB Table API - AZ-204 Exam Connection

## Relevant AZ-204 Exam Objectives

This lab covers several key areas of the AZ-204 certification exam, specifically under the "Develop solutions that use Cosmos DB" domain.

### Cosmos DB Skills Tested

**Creating and Configuring Cosmos DB Resources**
- Understanding different Cosmos DB APIs and when to use each one
- Creating Cosmos DB accounts with specific capabilities enabled
- Configuring Table API as an alternative to traditional Table Storage
- Understanding the differences in structure between API types

**Data Operations**
- Working with tables and entities in Cosmos DB
- Understanding connection strings and authentication
- Performing queries against table data

**Migration and Compatibility**
- Understanding migration paths from legacy Azure services to modern alternatives
- Recognizing when Table API is the appropriate choice
- Implementing zero-downtime migrations through configuration changes

### App Service Integration

This lab also touches on App Service objectives:

**Configuring Web Apps**
- Setting application configuration and connection strings
- Using Always On for background workers
- Deploying applications using ZIP deployment
- Working with WebJobs for background processing

**Application Settings and Configuration**
- Managing configuration externally from code
- Using hierarchical configuration keys (like Serilog settings)
- Updating configuration without redeploying code

### CLI Proficiency

The AZ-204 exam expects you to be comfortable with:
- Creating and managing Cosmos DB resources via Azure CLI
- Retrieving connection strings and keys programmatically
- Using query parameters to filter CLI output
- Understanding the structure of complex CLI commands

## Key Exam Concepts

### When to Use Table API

For the exam, understand that Table API is specifically designed for:
- **Migration scenarios** - Moving existing Table Storage applications to Cosmos DB
- **Legacy application support** - Maintaining older codebases without rewrites
- **Simple key-value workloads** - When you don't need the query complexity of SQL API
- **Drop-in replacement** - When you want Cosmos DB benefits without code changes

### Understanding Capabilities Flag

The `--capabilities EnableTable` flag is important to understand. Cosmos DB uses a unified engine but exposes different APIs through capabilities. This is different from `--kind`, which defines the base database type.

### Connection String Compatibility

A critical concept for the exam: the Table API connection string format is compatible with Azure Table Storage connection strings. This is intentional design to enable seamless migration. The application doesn't know or care whether it's connecting to Table Storage or Cosmos DB - the connection string format is identical.

### Configuration vs. Code Changes

This lab demonstrates an important architectural principle tested in AZ-204: separating configuration from code. We migrated from one data store to another without touching the application code, only by changing configuration. This is a best practice for cloud applications.

### Data Explorer and Querying

While we focused on writing data in this lab, the exam also tests your ability to query Cosmos DB. The lab challenge asks you to query for error logs in the last hour, which tests:
- Understanding Table API query syntax
- Filtering data based on properties
- Time-based queries
- Comparing query approaches across different APIs

## Common Exam Questions Patterns

You might see questions like:

**Scenario-Based Questions**
- "Your company has 20 applications using Table Storage. They want to improve global availability and add multi-region writes. What's the fastest migration path?" (Answer: Table API)

**Command Completion**
- "Complete this command to create a Cosmos DB account with Table API: `az cosmosdb create ... --kind _____ --capabilities _____`"

**Troubleshooting**
- "An application worked with Table Storage but fails after migrating to Cosmos DB Table API. What could be the issue?" (Look for differences in capabilities, query limitations, or configuration errors)

**Best Practices**
- "When should you choose Table API over SQL API?" (Legacy application support, migration scenarios, simple key-value patterns)

## Study Tips

1. **Understand the structural differences**: Table API has Account → Table(s), while SQL API has Account → Database → Container(s)

2. **Remember the creation pattern**: `--kind GlobalDocumentDB --capabilities EnableTable` - both parts are required

3. **Practice retrieving connection strings**: The CLI query syntax for filtering connection strings is commonly tested

4. **Know the migration story**: Table API exists primarily for migration - understand when and why to use it

5. **Compare with other APIs**: Be ready to explain why you'd choose Table API over SQL API or vice versa

## Hands-On Practice

To prepare for the exam, make sure you can:
- Create a Cosmos DB Table API account from scratch without referencing documentation
- Switch an application between Table Storage and Cosmos DB Table API
- Query data using the Table API syntax
- Retrieve and use connection strings programmatically
- Understand the pricing and performance implications of the switch

## Additional Resources

For the AZ-204 exam, review:
- Cosmos DB capacity planning and calculator
- Table API query syntax and limitations
- Differences between Table Storage and Table API
- Connection string formats and authentication options
- WebJobs and background processing in App Service

Remember: The exam tests practical knowledge. This lab gives you hands-on experience with real migration scenarios you'll see in the field.
