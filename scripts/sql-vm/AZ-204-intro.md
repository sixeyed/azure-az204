Excellent work with SQL VMs! This topic is important for the AZ-204 exam's compute and decision-making domains.

When you explored Azure SQL in the portal, you saw all the deployment options which ties into service selection criteria that's critical for the exam. Use SQL Server VMs when you need features not available in PaaS options like Azure SQL Database or SQL Managed Instance, require full control over SQL Server configuration, need to upload files to the file system for database operations, have specific OS-level requirements, or are migrating legacy applications requiring specific SQL Server features. Don't use SQL Server VMs when PaaS options meet your requirements, you want Azure to handle patching and backups and high availability, you want to minimize operational overhead, or you don't need OS-level access. The exam presents scenarios and you need to choose the appropriate option.

Creating a managed SQL Server with the CLI taught you IaaS implementation concepts that appear throughout the exam. You learned about creating and configuring virtual machines using Azure CLI with az vm create, understanding VM images with the URN format that uniquely identifies images, sizing options, and managing VM networking with Network Security Groups controlling traffic via rules. The exam tests understanding of these IaaS fundamentals through SQL VM scenarios.

When you registered the VM for SQL Server management, you used the SQL Server IaaS Agent Extension which is exam-testable. The extension provides Azure-integrated management capabilities and installs automatically when registered with az sql vm create. Key parameters you need to know include license-type which can be PAYG for Pay As You Go including SQL Server costs or BYOL for Bring Your Own License, sql-mgmt-type with Full for all management capabilities, connectivity-type as PUBLIC for internet access or PRIVATE for VNet only, and sql-auth-update for creating SQL authentication logins. The exam tests understanding of when and how to use the extension.

The section on customizing the SQL Server VM covered network security and authentication that must be understood. NSG rules control traffic with priority where lower numbers have higher priority, source from Internet or specific IPs or VNets, destination ports like 1433 for SQL Server and 3389 for RDP, and access as Allow or Deny. For authentication approaches, Windows authentication is default for SQL Server on VMs using domain credentials or local machine accounts. SQL authentication uses username and password stored in SQL Server, works across all network boundaries, and is configured through the IaaS extension or manually.

When you created the custom user-defined function, that demonstrated SQL Server features requiring VMs that the exam tests. CLR integration for .NET code in SQL Server requires file system access and elevated permissions. Other features include server-level configuration options not available in PaaS, SQL Server Agent with custom jobs, linked servers to non-Azure systems, and custom assemblies or extended stored procedures. The exam tests recognizing scenarios that require these features and therefore need VMs instead of managed services.

In the lab where you created SQL Server logins, that reinforced understanding of the complete control and responsibility you have with VMs. The exam covers comparisons with PaaS options: SQL Database for fully managed common scenarios, SQL Managed Instance for better on-premises compatibility, and SQL VMs for complete control. Understanding CLI commands you used like az vm create, az vm image list, az sql vm create, and az network nsg rule create is important, as is cost management where VM sizing affects cost along with SQL Server licensing models, storage costs, and network egress.
