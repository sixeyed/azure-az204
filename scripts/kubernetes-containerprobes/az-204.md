# Kubernetes Container Probes - AZ-204 Exam Focus

**Duration:** 3-4 minutes
**Audience:** AZ-204 exam candidates
**Focus:** Exam-relevant concepts and Azure integration

---

## Opening

Welcome! If you're preparing for the Microsoft AZ-204 exam, this video is specifically for you. We're going to focus on the container probe concepts and skills you need to master for the exam. The AZ-204 tests your ability to develop for Azure compute solutions, and container health monitoring is a key component of that objective. Let's dive into what you need to know.

---

## Section 1: Exam Objective Coverage

**[SCREEN: AZ-204 exam objectives outline]**

Container probes fall under the "Implement containerized solutions" objective in the AZ-204 exam. Specifically, you need to understand how to configure and monitor container health in Azure Kubernetes Service.

The exam won't ask you to memorize YAML syntax line by line, but you absolutely need to understand the three types of probes, when to use each one, and how they affect your application's behavior in production.

Let's break down exactly what the exam expects you to know.

---

## Section 2: The Three Probe Types - Exam Perspective

**[SCREEN: Table comparing Readiness, Liveness, and Startup probes]**

For the exam, you need to distinguish between these three probe types and know when to use each:

**Readiness Probes** determine if a container is ready to receive traffic. Think of scenarios like: an application that needs to load configuration, establish database connections, or warm up caches before serving requests. On the exam, if you see a question about controlling when a pod should receive traffic from a service, the answer involves readiness probes.

Key point: Failed readiness probes remove the pod from service endpoints but don't restart the container.

**Liveness Probes** determine if a container needs to be restarted. These are for detecting deadlocks, infinite loops, or corrupted application states that won't fix themselves. On the exam, questions about automatically recovering from application failures or restarting unhealthy containers point to liveness probes.

Critical distinction: Liveness probe failures trigger container restarts. This is more aggressive than readiness probes.

**Startup Probes** are for slow-starting applications. They disable readiness and liveness checks until the application finishes initializing. This prevents Kubernetes from killing containers that are just taking a while to start up. Exam questions about legacy applications with long initialization times or avoiding false-positive health check failures during startup relate to startup probes.

Remember: Startup probes are checked first. Only after they succeed do readiness and liveness probes begin.

---

## Section 3: Probe Implementation Methods

**[SCREEN: Show three probe types with example configurations]**

The exam wants you to understand the three ways to implement probes:

**HTTP Probes** - Kubernetes makes an HTTP GET request to a specified path and port. Success means a status code between two hundred and three ninety-nine. Use these for REST APIs, web applications, and any HTTP-based services.

Exam scenario: "Configure health monitoring for a web API deployed to AKS" - you'd use HTTP probes hitting a dedicated health endpoint.

**TCP Probes** - Kubernetes attempts to open a TCP connection to a specified port. Success means the port is accepting connections. Use these for databases, message queues, and non-HTTP services.

Exam scenario: "Monitor a database container's availability" - TCP probe to the database port.

**Exec Probes** - Kubernetes runs a command inside the container. Exit code zero means success. Use these when you need custom health check logic that can't be expressed as HTTP or TCP checks.

Exam scenario: "Implement custom health validation logic" - exec probe running a shell command or script.

---

## Section 4: Probe Configuration Parameters

**[SCREEN: YAML snippet with probe configuration parameters highlighted]**

The exam may test your understanding of probe timing and failure thresholds. Here are the key parameters:

**initialDelaySeconds** - How long to wait before starting probes after container startup. Critical for applications that need time to initialize.

**periodSeconds** - How often to perform the probe. More frequent checks mean faster detection but more overhead.

**timeoutSeconds** - How long to wait for a probe response before considering it failed.

**successThreshold** - How many consecutive successes are needed to consider the probe successful after a failure.

**failureThreshold** - How many consecutive failures are needed before taking action.

For the exam, understand the trade-offs. Aggressive settings give you faster failure detection but risk false positives. Conservative settings are more stable but slower to respond to real failures.

---

## Section 5: Container Lifecycle Management

**[SCREEN: Diagram showing container lifecycle with probe checkpoints]**

Understanding how probes affect the container lifecycle is crucial for the exam.

When a pod starts, here's what happens:

One - If a startup probe is configured, it runs first. Readiness and liveness probes are disabled until the startup probe succeeds.

Two - Once startup succeeds or if there's no startup probe, both readiness and liveness probes begin running according to their configured schedules.

Three - Failed readiness probes remove the pod from service endpoints immediately. The pod status shows as not ready.

Four - Failed liveness probes trigger container restarts. The restart count increments and the pod goes through initialization again.

Exam questions often present scenarios and ask you to predict the behavior. For example: "A pod has failing readiness probes but passing liveness probes - what happens?" Answer: The pod stays running but doesn't receive traffic.

---

## Section 6: Azure Kubernetes Service Integration

**[SCREEN: Azure Portal showing AKS cluster monitoring]**

For AZ-204, you need to understand how container probes integrate with Azure monitoring and management tools.

When you deploy applications to Azure Kubernetes Service, probe failures appear in several places:

**Azure Monitor** - Container insights collect pod health metrics, including probe failures. You can set up alerts based on pod readiness or restart counts.

**Application Insights** - For application-level monitoring, combine health check endpoints with Application Insights to correlate probe failures with application telemetry.

**Azure Log Analytics** - Query logs to analyze patterns in container restarts, probe failures, and health check results.

Exam tip: Know that Azure provides monitoring, but the probe configuration itself happens in your Kubernetes manifests, not in the Azure portal.

---

## Section 7: Best Practices for Production

**[SCREEN: Checklist of best practices]**

The exam loves best practices questions. Here's what you should know:

Always implement health check endpoints in your applications. Don't rely solely on checking if the process is running - verify the application is actually functional.

Use both readiness and liveness probes in production. Readiness isolates problems; liveness fixes them.

Set appropriate timeouts and thresholds. Don't restart containers at the first sign of trouble - give them time to recover from transient issues.

For startup probes, calculate the maximum startup time and configure accordingly. The formula is: initial delay plus failure threshold times period seconds should exceed your worst-case startup time.

Design health endpoints that actually verify functionality. A health check that just returns "OK" without checking dependencies isn't valuable.

---

## Section 8: Common Exam Scenarios

**[SCREEN: Sample exam question format]**

Let's look at typical exam scenarios:

Scenario one: "An application takes sixty seconds to initialize. Without changes, containers are being killed during startup." Solution: Add a startup probe with appropriate timing to allow initialization to complete.

Scenario two: "Pods are running but users report intermittent errors. The application is behind a Kubernetes service." Solution: Implement readiness probes to remove unhealthy pods from the service endpoint pool.

Scenario three: "An application occasionally enters a deadlock state and stops responding. The container remains running." Solution: Implement a liveness probe that detects the deadlock and triggers container restarts.

Scenario four: "You need to perform zero-downtime deployments with health verification." Solution: Use readiness probes to ensure new pods are healthy before receiving traffic during rolling updates.

---

## Section 9: Hands-On Skills

**[SCREEN: Terminal showing kubectl commands]**

The exam is practical, so you need hands-on skills. Be comfortable with:

Deploying applications with probe configurations using kubectl apply.

Checking pod status and understanding readiness conditions using kubectl get pods and kubectl describe.

Viewing service endpoints to see which pods are receiving traffic.

Watching real-time pod status changes during health check failures.

Reading and understanding YAML manifests that include probe definitions.

Practice these commands until they're second nature. The exam may include interactive scenarios where you need to troubleshoot container health issues.

---

## Section 10: Key Takeaways for the Exam

**[SCREEN: Summary slide with key points]**

Let's wrap up with the critical points for the AZ-204 exam:

One - Know the three probe types and when to use each: readiness for traffic control, liveness for restart decisions, startup for slow-starting apps.

Two - Understand the three implementation methods: HTTP for web services, TCP for port-based checks, exec for custom logic.

Three - Recognize how probes affect container lifecycle: readiness controls service endpoints, liveness triggers restarts.

Four - Know the configuration parameters and their trade-offs: timing, thresholds, and failure handling.

Five - Understand Azure integration: how probe failures appear in Azure Monitor, Log Analytics, and Application Insights.

Six - Apply best practices: always use health checks in production, configure appropriate timeouts, design meaningful health endpoints.

---

## Closing

**[SCREEN: Additional resources]**

Container probes are a fundamental part of building resilient applications in Azure Kubernetes Service. For the AZ-204 exam, focus on understanding the concepts, recognizing scenarios, and applying best practices.

Practice deploying applications with different probe configurations, observe the behavior, and make sure you can troubleshoot health check issues. This hands-on experience will serve you well both on the exam and in real-world Azure development.

Good luck with your AZ-204 preparation!

---

**[END OF AZ-204 FOCUS]**
