# Securing VNet Access - AZ-204 Exam Relevance

## Overview

This lab directly addresses several key competencies tested in the AZ-204 Azure Developer Associate certification exam. Let's break down how these concepts map to exam objectives.

## Exam Domain: Implement Azure Security

### Network Security Groups (NSGs)

**Exam Objective**: Implement secure cloud solutions including network security.

Network Security Groups are a fundamental security control in Azure that you'll need to understand for the exam. Here are the key concepts:

**What the exam expects you to know**:
- NSGs act as virtual firewalls at the subnet or NIC level
- Rules are evaluated by priority (lower numbers first)
- Each NSG has default rules that cannot be deleted
- Default rules include allowing VNet traffic and denying all other inbound by default
- You can create custom rules to allow or deny specific traffic patterns
- Rules are stateful - return traffic is automatically allowed

**Common exam scenarios**:
- "A web application needs to be accessible on port 443 but protected from SSH access" - requires NSG configuration
- "Isolate database tier from public internet" - subnet-level NSG application
- "Allow traffic only from a specific IP range" - source address prefix configuration

**CLI commands you should know**:
```
az network nsg create
az network nsg rule create
az network vnet subnet update --network-security-group
```

### Azure Bastion

**Exam Objective**: Secure access to Azure resources.

Bastion is Microsoft's managed solution for secure VM access without exposing RDP or SSH ports.

**What the exam expects you to know**:
- Bastion provides secure RDP/SSH access through the Azure Portal
- No public IP required on the target VM
- No need to open ports 22 or 3389 in NSG rules
- Deployed at the VNet level, can serve multiple VMs
- Requires a dedicated subnet named "AzureBastionSubnet"
- Provides protection against port scanning and zero-day exploits

**Common exam scenarios**:
- "Provide secure access to VMs without public IPs" - Bastion solution
- "Administrator access to production VMs in locked-down network" - Bastion use case
- "Eliminate need for jump boxes" - Bastion advantage

**Key concept for the exam**: Bastion is the recommended approach over traditional jump boxes or opening SSH/RDP ports to the internet.

## Exam Domain: Develop for Azure Compute

### Virtual Network Integration

**Exam Objective**: Implement solutions that use virtual machines and containers.

Understanding how VMs integrate with VNets is essential for the exam.

**What the exam expects you to know**:
- VMs are deployed into specific subnets within VNets
- NSGs can be applied at subnet or NIC level (or both)
- Private IP addresses are assigned from the subnet's address range
- Public IPs are optional and separate resources
- VMs inherit network security from their subnet's NSG

**Common exam scenarios**:
- "Deploy a multi-tier application with proper network isolation"
- "Configure VMs to communicate privately within a VNet"
- "Restrict VM network access using NSGs"

## Exam Domain: VNet Peering

**Exam Objective**: Implement networking for Azure solutions.

VNet peering is a critical networking concept that frequently appears on the exam.

**What the exam expects you to know**:
- Peering connects two VNets allowing resources to communicate
- Must be configured bidirectionally (both VNets peer to each other)
- VNets must have non-overlapping address spaces
- Can peer VNets across regions (Global VNet Peering)
- Can peer VNets across subscriptions
- Traffic between peered VNets uses Microsoft backbone (not public internet)
- Peering is non-transitive (if A peers to B and B peers to C, A cannot reach C)

**Common exam scenarios**:
- "Connect application VNet to database VNet" - VNet peering solution
- "Enable cross-region VM communication" - Global VNet peering
- "Two VNets with overlapping address spaces" - peering is NOT possible, requires VPN Gateway or reconfiguration

**CLI commands you should know**:
```
az network vnet peering create
az network vnet peering list
```

## Key Exam Tips

### Planning Address Spaces

Always plan VNet address spaces in advance. The exam may present scenarios where:
- You need to peer VNets later - they must have non-overlapping CIDR blocks
- You need to connect to on-premises networks - avoid conflicts with corporate networks
- You're designing for future growth - allocate sufficient address space initially

**Common CIDR ranges for isolated networks**:
- 10.0.0.0/8 (large networks)
- 172.16.0.0/12 (medium networks)
- 192.168.0.0/16 (small networks)

### NSG Rule Priority

Remember priority rules for the exam:
- Lower priority numbers are evaluated first (100 before 200)
- Priority range: 100 to 4096
- If no rule matches, default rules apply
- Once a rule matches, processing stops

### Security Best Practices

The exam tests your knowledge of Azure security best practices:
- Always use NSGs to limit network access
- Never expose management ports (22, 3389) to the internet
- Use Bastion instead of public IPs for VM management
- Apply principle of least privilege in NSG rules
- Use subnet-level NSGs for broad policies, NIC-level for specific exceptions

### Troubleshooting Connectivity

Common troubleshooting scenarios on the exam:
- "VM cannot communicate with another VM" - check NSG rules, check VNet peering status
- "Cannot access VM via SSH" - check NSG rules, consider Bastion
- "Web traffic not reaching application" - check NSG rules, verify rule priorities
- "VNet peering shows disconnected" - check both sides are configured, verify permissions

### Cost Considerations

The exam may ask about cost optimization:
- Bastion has a fixed hourly cost regardless of number of VMs
- VNet peering has data transfer charges (ingress free, egress charged)
- NSGs are free - no cost for rules or associations
- Public IPs have small hourly costs

## Practical Application for AZ-204

As an Azure developer, you'll use these concepts when:
- Deploying microservices that need network isolation
- Securing APIs and web applications
- Implementing multi-tier architectures
- Connecting development and production environments
- Integrating with on-premises systems
- Building secure DevOps pipelines

## Related Exam Topics

This lab also touches on related concepts you should study:
- Application Gateway and Web Application Firewall
- Azure Firewall for network-level protection
- Service Endpoints for securing PaaS services
- Private Link for private connectivity to Azure services
- Network Watcher for monitoring and diagnostics

## Summary

For the AZ-204 exam, focus on:
1. How to create and configure NSGs with appropriate rules
2. When to use Bastion versus other access methods
3. How to set up VNet peering and its limitations
4. Planning network architecture with proper address spaces
5. Troubleshooting common networking issues
6. Security best practices for Azure networking

These foundational networking skills are essential not just for passing the exam, but for building secure, scalable Azure solutions in your development career.
