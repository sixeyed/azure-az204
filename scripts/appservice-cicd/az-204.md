# App Service CI/CD - AZ-204 Exam Focus

## Introduction

For the AZ-204 Microsoft Azure Developer Associate certification, understanding App Service deployment options and continuous deployment is crucial. This script focuses on the key concepts and commands you need to know for the exam.

## Key Exam Topics

### 1. Deployment Methods

Azure App Service supports multiple deployment methods:

**Source Control Integration** - Deploy directly from Git repositories including GitHub, Azure Repos, Bitbucket, and local Git. This is what we're focusing on in this lab.

**Container-based Deployment** - Deploy from container registries like Azure Container Registry or Docker Hub.

**ZIP Deploy** - Upload a ZIP file containing your application.

**FTP/FTPS** - Traditional file transfer protocols for deployment.

**Azure Pipelines** - Full CI/CD pipelines with Azure DevOps.

**GitHub Actions** - Modern CI/CD workflows integrated with GitHub.

For the exam, understand when to use each method and their trade-offs.

### 2. Deployment Slots

Deployment slots are a critical feature for the AZ-204 exam. Key points to remember:

**Availability** - Deployment slots are only available in Standard, Premium, and Isolated App Service plan tiers. The Basic and Free tiers do not support slots.

**Slot Names** - Slots can have any name except "production" which is reserved for the main production slot.

**Independent Configuration** - Each slot can have its own configuration settings, connection strings, and application settings.

**Slot-Specific Settings** - You can mark settings as "slot sticky" so they don't move during a swap.

**Warm-up** - Slots are pre-warmed before swapping to eliminate cold starts in production.

### 3. Important CLI Commands

For the exam, know these Azure CLI commands:

**Create a deployment slot:**
```
az webapp deployment slot create --slot slot-name -g resource-group -n app-name
```

**Configure deployment source:**
```
az webapp deployment source config -g resource-group -n app-name --repo-url github-url --branch branch-name --git-token token
```

**Swap slots:**
```
az webapp deployment slot swap -g resource-group -n app-name --slot staging --target-slot production
```

**Configure slot-specific settings:**
```
az webapp config appsettings set --slot slot-name --slot-settings KEY=value -g resource-group -n app-name
```

**Delete deployment source:**
```
az webapp deployment source delete -g resource-group -n app-name
```

**View deployment logs:**
```
az webapp log deployment show -g resource-group -n app-name
```

### 4. Deployment Configuration

Understanding configuration is essential:

**Manual Integration** - Use the `--manual-integration` flag for deployments that must be manually triggered.

**Branch Configuration** - Different slots can deploy from different branches, enabling branch-based deployment strategies.

**Project Path** - Use the PROJECT app setting to specify which project to build in a monorepo: `PROJECT='path/to/project.csproj'`

**Build Configuration** - Azure uses Oryx to detect and build applications automatically based on the runtime.

### 5. Slot Swap Behavior

This is a common exam topic. When you swap slots:

**Configuration Swaps** - Most settings move with the slot during a swap.

**Slot-Sticky Settings** - Connection strings and app settings marked as slot-specific do NOT swap.

**Hostnames Swap** - The URLs are swapped, so staging becomes production.

**Zero Downtime** - Swapping is designed to provide zero-downtime deployments.

**Auto-Swap** - You can configure auto-swap to automatically swap slots after a successful deployment.

**Swap with Preview** - A multi-phase swap that allows validation before completing.

### 6. GitHub Integration

For the exam, understand GitHub-specific integration:

**Authentication** - Azure requires a Personal Access Token (PAT) with `workflow` and `admin:repo_hook` permissions.

**Webhooks** - Azure creates webhooks in your GitHub repo to trigger deployments on push events.

**Manual vs. Continuous** - Manual integration requires clicking Sync, while continuous integration automatically deploys on push.

**Branch Mapping** - Different deployment targets can map to different branches.

### 7. Best Practices for the Exam

Know these best practices:

**Always Test in Staging** - Use deployment slots to test before production.

**Use Standard SKU or Higher** - Required for deployment slots.

**Slot-Specific Connection Strings** - Keep production data separate by using slot-specific settings for connection strings.

**Automated Deployments** - Prefer continuous deployment over manual for consistency and speed.

**Health Checks** - Configure health check paths to ensure slots are ready before swapping.

**Rollback Strategy** - You can swap slots back if issues are discovered after deployment.

### 8. Common Exam Scenarios

Be prepared for these types of questions:

**Scenario 1**: "You need to deploy a web application with zero downtime. What should you use?"
- Answer: Deployment slots with slot swapping

**Scenario 2**: "Your staging environment is connecting to the production database after a slot swap. What's the issue?"
- Answer: The connection string is not configured as slot-specific

**Scenario 3**: "You need to deploy automatically when code is pushed to GitHub. What should you configure?"
- Answer: Continuous deployment with GitHub token authentication

**Scenario 4**: "Your App Service plan is Basic tier but deployment slots aren't showing. Why?"
- Answer: Deployment slots require Standard tier or higher

**Scenario 5**: "You want to validate changes before they reach production users. What feature should you use?"
- Answer: Deployment slots with swap-with-preview

### 9. Integration with Other Azure Services

Understand how App Service deployments integrate with:

**Azure Key Vault** - Reference secrets in app settings using Key Vault references.

**Application Insights** - Automatically configured for monitoring deployments.

**Azure DevOps** - Alternative CI/CD pipeline to GitHub Actions.

**Azure Container Registry** - For container-based deployments.

**Azure Monitor** - Track deployment health and performance.

### 10. Security Considerations

For the exam, know security best practices:

**PAT Protection** - Personal Access Tokens should be kept secure and rotated regularly.

**HTTPS Only** - Always enforce HTTPS for production applications.

**Managed Identities** - Use managed identities instead of connection strings where possible.

**Slot Access Control** - Slots can have separate access controls and authentication settings.

**Deployment Credentials** - Understand the difference between user-level and app-level deployment credentials.

### 11. Monitoring and Troubleshooting

Know how to troubleshoot deployments:

**Deployment Center** - The primary tool in the portal for viewing deployment status and logs.

**Kudu Console** - Advanced diagnostic console available at `https://app-name.scm.azurewebsites.net`

**Log Streaming** - Real-time view of application and deployment logs.

**Deployment History** - View previous deployments and rollback if needed.

**Activity Log** - Azure Resource Manager logs for all operations on the resource.

## Exam Tips

1. **Tier Requirements** - Remember that deployment slots require Standard tier or higher.

2. **Command Syntax** - Practice the CLI commands; know the parameter names and when to use `--slot` vs. `--target-slot`.

3. **Configuration Scope** - Understand what configuration is slot-specific vs. app-level.

4. **Swap Behavior** - Know exactly what happens during a slot swap and what doesn't swap.

5. **Integration Options** - Understand the different CI/CD options and when to use each.

6. **Authentication Methods** - Know how Azure authenticates with GitHub, Azure Repos, etc.

7. **Zero Downtime** - Be able to design deployment strategies that achieve zero downtime.

8. **Cost Optimization** - Understand that slots consume additional compute resources from your App Service plan.

## Practice Questions to Consider

As you study, think about:

- How would you implement blue-green deployments using slots?
- What's the minimum SKU required for production and staging environments?
- How do you prevent sensitive connection strings from swapping?
- What happens if you delete a deployment source configuration?
- How can you deploy different branches to different slots automatically?
- What permissions are needed in the GitHub PAT for continuous deployment?

## Summary

App Service CI/CD and deployment slots are fundamental topics for the AZ-204 exam. Focus on:

- Understanding when and how to use deployment slots
- Knowing the CLI commands for deployment configuration
- Recognizing tier requirements and limitations
- Understanding slot swap behavior and configuration
- Integrating with GitHub and other source control systems
- Implementing zero-downtime deployment strategies

Practice these concepts in the Azure portal and with the CLI to build confidence for the exam. The hands-on experience from this lab directly applies to exam scenarios.

Good luck with your AZ-204 certification!
