We've covered Azure Front Door as Microsoft's modern cloud CDN with global load balancing and security. Now let's implement a globally distributed application with WAF protection that blocks attacks while accelerating content delivery.

When you explore and create Front Door in the Portal, you'll discover the Quick Create option that walks you through the tier choices. The Standard tier prioritizes performance while Premium tier adds comprehensive security features including WAF. Front Door supports lots of origin types including ACI, API Management, and Application Gateway. You can enable caching on static resources just by ticking a box. We'll use the CLI to create a Premium tier Front Door profile since we need WAF functionality later for protecting against attacks.

You'll then configure the ACI backends as origins by deploying two Azure Container Instances running the same application in East US and West US. This simulates a globally distributed architecture where users connect to the nearest healthy backend for better performance. While those containers start, you'll explore Front Door manager in the Portal to understand how endpoints become subdomains that are the entrypoint to your app, origin groups define the backends with their health settings, routes link frontends to backends, and rule sets plus security policies customize processing behavior for each route. Creating the origin group involves setting health probe parameters like which URL path to test on each backend, how frequently to probe to check if origins are still healthy, how many successful responses determine that an origin is healthy and should receive traffic, and how much additional latency is acceptable before considering an origin unhealthy. When you add the origins themselves, you'll configure priority and weighting for load balancing decisions. Both containers get priority one, but you'll set different weights so that container two receives roughly three times more traffic than container one when both are healthy, demonstrating weighted load distribution.

Configuring the frontend requires creating an endpoint which becomes the public domain name for your application with the azurefd.net suffix. Everything is ready at that point, and the final step links the frontend endpoint with the backend origin group by creating a route. The route configuration is where features like compression get enabled. Since ACI doesn't provide HTTPS endpoints, you'll restrict traffic to HTTP only in the route settings. Compression gets enabled so that when client browsers send requests indicating they support compressed responses through Accept-Encoding headers, Front Door automatically compresses text-based content like HTML, CSS, and JavaScript at edge locations worldwide, reducing bandwidth and improving load times.

When you apply WAF security rules, you'll start by creating a WAF policy that runs in Prevention mode meaning it actively blocks malicious traffic rather than just logging it in Detection mode. The policy starts without any rules, so you need to select rulesets to enable protection. You'll add the Microsoft Default Rule Set which covers OWASP threats like SQL injection and cross-site scripting, and the Bot Manager which blocks known bad bots that attempt to scrape or attack your site. The WAF policy exists as a separate resource in your resource group that you then attach to your Front Door endpoint by creating a security policy in the Front Door Profile. Once configured, you'll test it by attempting SQL injection attacks through the Front Door endpoint. The WAF blocks these with 403 Forbidden responses showing the request is blocked message, while the same attack succeeds when you bypass Front Door and hit the container directly, proving that Front Door is protecting your backend.

The lab challenge has you adding a new application to your existing Front Door profile. You'll run a Pi calculation container in ACI and then follow similar steps to create its own origin group, endpoint, and route. This demonstrates how a single Front Door instance can front multiple applications with independent configurations and security policies, all sharing the same global CDN infrastructure while maintaining separate routing rules.

Let's build a globally secure application with intelligent load balancing!
