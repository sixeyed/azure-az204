# AKS Ingress and Application Gateway - AZ-204 Exam Connection

## Exam Relevance

This lab covers several key objectives from the AZ-204 certification exam, specifically focusing on container-based solutions and Azure networking. Understanding how to expose containerized applications through Application Gateway is fundamental to the exam's containerization domain.

## Implementing Containerized Solutions

When you're studying for the AZ-204 exam, you'll encounter questions about deploying and managing containers using Azure Kubernetes Service. This is a core skill area that typically accounts for a significant portion of the exam. The lab you just completed demonstrates exactly the kind of scenario the exam will test - creating AKS clusters with specific network configurations and integrating them with Azure services.

The exam expects you to understand how to create AKS clusters with custom networking. You'll need to know the difference between the Azure CNI network plugin and kubenet, when to use each one, and how they affect your IP address planning. Azure CNI gives each Pod its own IP address from your VNet, which provides direct network communication but requires more IP addresses. Kubenet uses NAT for Pods, which conserves IP addresses but adds an extra network hop. For the Application Gateway integration we did in this lab, Azure CNI is required because the Application Gateway needs to route directly to Pod IP addresses.

The exam will also test your knowledge of VNet integration requirements and subnet sizing. When you integrate AKS with a VNet, you need to plan your address space carefully. The subnet for AKS needs to be large enough to accommodate all your Pods when using Azure CNI, not just your nodes. That's why we created a larger subnet with a /21 CIDR block in the lab. The Application Gateway also needs its own dedicated subnet, which is a requirement you might see tested on the exam.

Managing AKS add-ons is another important exam topic. The Application Gateway Ingress Controller we installed is an example of how AKS extends its functionality through add-ons. You should understand how to enable add-ons using Azure CLI, what each add-on does, and when you'd use them in real-world scenarios. The exam might present a scenario where you need to choose the right add-on for a specific requirement.

## Connecting to Azure Services

The exam also covers how to connect to and consume Azure services, which includes understanding how to expose applications and route traffic. Application Gateway plays a role here as a Layer 7 load balancer, which is different from the Layer 4 load balancing you get with Azure Load Balancer. Understanding this distinction is crucial for the exam.

Layer 4 load balancing operates at the transport layer and makes routing decisions based on IP addresses and TCP ports. It's fast and efficient but doesn't understand HTTP. Layer 7 load balancing operates at the application layer and can make routing decisions based on HTTP headers, URLs, and domain names. That's what Application Gateway provides, and it's why we can route traffic to different applications based on the domain name in the HTTP request.

The exam will test when you should use Application Gateway versus a simple Load Balancer. If you just need to distribute traffic across identical backend instances and don't need HTTP-specific features, a Load Balancer is simpler and cheaper. But when you need SSL termination, path-based routing, or Web Application Firewall protection, Application Gateway is the right choice. In our lab scenario, we wanted to route traffic based on domain names, which requires Layer 7 capabilities.

You'll also need to understand public IP address SKUs. Application Gateway v2 requires the Standard SKU public IP, not the Basic SKU. This is the kind of detail that appears in exam questions, often in scenarios where something isn't working and you need to identify the configuration error. Standard SKU public IPs have different capabilities than Basic, including support for availability zones and more flexible allocation methods.

Understanding routing rules and backend pools is essential for exam success. In Application Gateway, a routing rule connects a listener on the frontend to a backend pool. The AGIC add-on automatically creates and manages these routing rules based on your Kubernetes Ingress objects, but you need to understand the underlying architecture. The exam might show you an Application Gateway configuration and ask you to identify how traffic will be routed, or present a scenario where routing isn't working and you need to troubleshoot.

## Implementing Azure Security

This lab also demonstrates important security concepts that appear on the AZ-204 exam. Virtual Network segmentation using subnets is a fundamental security practice. By putting the Application Gateway in its own subnet and the AKS nodes in another subnet, we can apply different network security groups and route tables to each subnet. This provides defense in depth and follows the principle of least privilege.

IP address planning is more than just a networking concern - it's also a security consideration. When you integrate AKS with a VNet using Azure CNI, your Pods get IP addresses from the VNet address space. This means they can communicate directly with other Azure resources in the same VNet or peered VNets. You need to understand how this affects your security posture and how to control that communication using network policies.

The lab also touched on role-based access control when we saw the message about waiting for AAD roles to propagate. When you create an AKS cluster with VNet integration, Azure automatically creates a service principal or managed identity and grants it the necessary permissions to manage network resources. Understanding this process is important for troubleshooting and for exam scenarios about permissions.

## Understanding Exam Question Patterns

The AZ-204 exam frequently presents scenario-based questions where you need to choose the right solution. A typical question might describe a requirement like exposing multiple web applications running on AKS using a single public IP address with routing based on domain names. The correct answer would be Azure Application Gateway with the Ingress Controller add-on. This is exactly what we configured in the lab, and understanding why this is the right solution - rather than using multiple Load Balancers or NodePort services - is what the exam tests.

Another common scenario involves choosing the appropriate network plugin when deploying an AKS cluster that needs to integrate with existing Azure networking infrastructure. The answer is Azure CNI, and you need to understand why. Azure CNI provides direct VNet integration where each Pod gets an IP address from your VNet, enabling seamless communication with other Azure resources and support for features like Application Gateway integration.

The exam also tests command-line knowledge, particularly Azure CLI commands for creating and managing AKS resources. You should be comfortable with commands for creating AKS clusters with specific configurations, managing network resources, configuring add-ons, and retrieving resource IDs. While you don't need to memorize exact syntax, you should understand what parameters are available and what they control.

Architecture decisions are another area where the exam tests your judgment. For example, why might you create the Application Gateway before creating the AKS cluster rather than letting the AGIC add-on create everything automatically? The answer relates to having control over the configuration and being able to preserve the Application Gateway if you need to recreate the cluster. Understanding these trade-offs between convenience and control is what separates candidates who pass from those who don't.

## Key Concepts for Exam Success

When it comes to exposing Kubernetes services, you need to understand the differences between NodePort, LoadBalancer, and Ingress. NodePort exposes your service on each node's IP at a static port, which works but isn't typically used in production because it requires users to know node IP addresses and port numbers. LoadBalancer creates a cloud load balancer with a dedicated public IP, which is simple to set up but doesn't scale well when you have many applications because each one needs its own public IP. Ingress uses a single load balancer or gateway with routing rules, which is the production best practice. This is what we implemented in the lab with Application Gateway.

The Application Gateway Ingress Controller deserves special attention because it represents a common pattern in Azure architecture. AGIC runs as a Pod within your AKS cluster, continuously monitoring Kubernetes Ingress resources. When you create or modify an Ingress object, AGIC automatically configures the Application Gateway with the appropriate routing rules, backend pools, and health probes. This eliminates manual configuration and ensures your Application Gateway stays synchronized with your Kubernetes deployments. Understanding this automation is important for exam questions about operational efficiency and infrastructure as code.

The comparison between Azure CNI and kubenet appears frequently on the exam. With Azure CNI, each Pod gets an IP address from the VNet, enabling direct network communication. This provides better performance and simpler networking but requires more IP addresses - you need to plan for every Pod to have a VNet IP. With kubenet, Pods use NAT and nodes get VNet IPs but Pods do not. This conserves IP addresses because you only need VNet IPs for your nodes, but it adds an extra hop in routing and isn't compatible with some Azure networking features like Application Gateway integration.

Resource dependencies and creation order matter when you're designing Azure solutions. Understanding why we created the Public IP Address before the Application Gateway, and why we created the Application Gateway before enabling the AGIC add-on, demonstrates architectural knowledge that the exam rewards. Each resource depends on the previous one being available, and trying to create them out of order will result in errors.

## Preparing for Exam Scenarios

When you're studying for the AZ-204 exam, focus on understanding the reasoning behind each architectural decision rather than memorizing steps. Know why you'd choose Application Gateway over a simple LoadBalancer - it's about HTTP-level routing, SSL termination, and Web Application Firewall capabilities. Remember that Application Gateway needs Standard_v2 or WAF_v2 SKU to work with AKS, as this is exactly the kind of detail that appears in troubleshooting questions.

Networking knowledge is particularly important. You need to understand subnet requirements, IP address planning, and how Azure CNI differs from kubenet. The exam might present a scenario where an AKS cluster needs a certain number of Pods and ask you to calculate the required subnet size, or show you a configuration that isn't working and ask you to identify why.

Think about real-world applications as you study. Multi-tenant applications running on one AKS cluster serving multiple customers with different domains demonstrates the power of Ingress with Application Gateway. Microservices architectures routing to different services based on URL paths shows path-based routing capabilities. Blue-green deployments using Ingress to switch traffic between versions illustrates how this architecture supports modern deployment practices. Cost optimization by consolidating multiple applications behind a single Application Gateway shows operational efficiency.

## Expanding Your Knowledge

To fully prepare for AKS-related questions on the AZ-204 exam, you should also understand how Container Registry integrates with AKS for pulling images. Study the scaling options including cluster autoscaler for nodes and horizontal pod autoscaler for Pods. Learn about AKS monitoring with Azure Monitor and Container Insights for observability. Explore AKS security features like Azure Policy integration and Pod Security Standards. Understand storage options including Azure Disks and Azure Files for different persistence requirements. And examine secret management with Azure Key Vault integration for securing sensitive configuration data.

This lab provided hands-on experience with AKS deployment, networking integration, and Application Gateway configuration. These topics appear frequently on the AZ-204 exam, and understanding not just the commands but the architectural decisions and trade-offs will serve you well. The exam tests both theoretical knowledge and practical application, rewarding candidates who can apply their understanding to novel scenarios rather than simply recalling memorized facts.
