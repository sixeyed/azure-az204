# AKS Ingress and Application Gateway - AZ-204 Exam Connection

## Exam Relevance

This lab covers several key objectives from the AZ-204 certification exam, specifically focusing on container-based solutions and Azure networking.

## AZ-204 Skill Areas Covered

### 1. Implement Containerized Solutions

**Deploy and manage containers by using Azure Kubernetes Service (AKS)**

This lab directly addresses AKS deployment and configuration, which is a core skill for the AZ-204 exam. You need to understand:

- Creating AKS clusters with specific network configurations
- Using the Azure CNI network plugin versus kubenet
- Integrating AKS with existing Azure Virtual Networks
- Managing AKS add-ons and extensions
- Working with kubectl to deploy and manage applications

**Key Exam Concepts:**
- AKS cluster creation with custom networking
- Understanding the difference between network plugins
- VNet integration requirements and subnet sizing
- Using Azure CLI to manage AKS resources
- Deploying applications to AKS using kubectl

### 2. Connect to and Consume Azure Services

**Application Gateway and Ingress Controllers**

While not always explicitly called out, understanding how to expose applications and route traffic is important for the exam:

- Azure Application Gateway as a Layer 7 load balancer
- Public IP address configuration
- DNS configuration for Azure resources
- Integration between multiple Azure services
- Using add-ons to extend AKS functionality

**Key Exam Concepts:**
- Difference between Layer 4 and Layer 7 load balancing
- When to use Application Gateway versus Load Balancer
- Public IP SKUs (Basic vs Standard)
- Routing rules and backend pools
- Health probes and monitoring

### 3. Implement Azure Security

**Network Security and Segmentation**

This lab demonstrates important security concepts:

- Virtual Network segmentation using subnets
- Proper IP address planning for Azure resources
- Role-based access control (RBAC) for service principals
- Secure communication between Azure services

**Key Exam Concepts:**
- VNet and subnet design
- Service principal permissions
- Managed identities for Azure resources
- Network security best practices

## Common Exam Question Patterns

### Scenario-Based Questions

The AZ-204 exam often presents scenarios where you need to choose the right solution. Based on this lab, you might see questions like:

**Example 1:**
"You need to expose multiple web applications running on AKS using a single public IP address and route traffic based on the domain name. Which Azure service should you use?"

**Answer:** Azure Application Gateway with Ingress Controller

**Example 2:**
"You're deploying an AKS cluster that needs to integrate with existing Azure networking infrastructure. Which network plugin should you use?"

**Answer:** Azure CNI (azure network plugin)

**Example 3:**
"What is required to allow AKS to manage Application Gateway routing automatically?"

**Answer:** The Application Gateway Ingress Controller (AGIC) add-on

### Command-Line Knowledge

The exam may test your knowledge of Azure CLI commands for:

- Creating AKS clusters with specific configurations
- Managing network resources
- Configuring add-ons
- Retrieving resource IDs and connection credentials

### Architecture Decisions

Be prepared to answer questions about:

- When to create resources separately versus using automated creation
- Why you might create Application Gateway before AKS
- Subnet sizing considerations
- Regional deployment requirements

## Important Concepts to Remember

### 1. Ingress vs LoadBalancer vs NodePort

- **NodePort:** Exposes the service on each Node's IP at a static port (not typically used in production)
- **LoadBalancer:** Creates a cloud load balancer with a dedicated public IP (simple but doesn't scale well for many apps)
- **Ingress:** Uses a single load balancer/gateway with routing rules (production best practice)

### 2. Application Gateway Ingress Controller (AGIC)

- Runs as a pod within the AKS cluster
- Monitors Kubernetes Ingress resources
- Automatically configures Application Gateway based on Ingress objects
- Eliminates manual configuration of routing rules

### 3. Network Plugin Comparison

**Azure CNI:**
- Each pod gets an IP from the VNet
- Direct network communication
- Requires more IP addresses
- Better performance
- Used in this lab

**Kubenet:**
- Pods use NAT
- Nodes get VNet IPs, pods do not
- Fewer IP addresses needed
- Additional hop in routing

### 4. Resource Dependencies

Understanding the creation order matters:
1. Resource Group
2. Public IP Address
3. Virtual Network and Subnets
4. Application Gateway
5. AKS Cluster
6. AGIC Add-on integration
7. Application Deployment
8. Ingress Resources

## Practice Tips for the Exam

1. **Understand the "why"** - Know why you'd choose Application Gateway over a simple LoadBalancer
2. **Remember SKU requirements** - Application Gateway needs Standard_v2 or WAF_v2 to work with AKS
3. **Know the networking** - Understand subnet requirements and IP address planning
4. **Practice CLI commands** - The exam may include command-line questions
5. **Understand integration points** - How different Azure services work together

## Real-World Applications

While studying for the exam, think about how you'd use these patterns:

- **Multi-tenant applications:** One AKS cluster serving multiple customers with different domains
- **Microservices architectures:** Routing to different services based on URL paths
- **Blue-green deployments:** Using Ingress to switch traffic between versions
- **Cost optimization:** Consolidating multiple apps behind a single Application Gateway

## Additional Study Areas

To fully prepare for AKS-related exam questions, also review:

- Azure Container Registry integration with AKS
- AKS scaling options (cluster autoscaler, horizontal pod autoscaler)
- AKS monitoring with Azure Monitor and Container Insights
- AKS security features (Azure Policy, Pod Security Standards)
- Storage options for AKS (Azure Disks, Azure Files)
- Secret management with Azure Key Vault and AKS

## Summary

This lab provides hands-on experience with AKS deployment, networking integration, and Application Gateway configuration - all important topics for the AZ-204 exam. Make sure you understand not just the commands, but the architecture decisions and when to use each approach.

The exam tests both theoretical knowledge and practical application, so practice these scenarios multiple times and experiment with different configurations to build confidence.
