# Cosmos DB Performance Provisioning - AZ-204 Exam Relevance

## Exam Objective Coverage

This lab directly supports several key objectives in the AZ-204: Developing Solutions for Microsoft Azure certification exam.

### Azure Cosmos DB (Part of "Develop for Azure Storage")

The AZ-204 exam requires you to demonstrate skills in developing solutions that use Cosmos DB. Specifically, this lab covers:

**1. Implement partitioning schemes**
- Understanding how partition keys affect data distribution
- Choosing appropriate partition keys for your data model
- Seeing how partition key queries use fewer Request Units

**2. Set the appropriate consistency level for operations**
- We created our account with Eventual consistency
- Understanding that consistency level affects both performance and cost
- Knowing when to use different consistency levels

**3. Create Cosmos DB containers**
- Using Azure CLI to create databases and containers
- Configuring throughput at container and database levels
- Understanding provisioned vs serverless vs autoscale models

**4. Implement scaling (including partitions)**
- Allocating Request Units at database and container levels
- Understanding how to distribute throughput across containers
- Measuring actual RU consumption to inform scaling decisions

**5. Optimize performance**
- Implementing index policies to reduce costs
- Understanding point reads vs queries
- Data modeling for optimal performance and cost

## Key Exam Topics Demonstrated

### Request Units (RUs)

The exam expects you to understand Request Units thoroughly:
- What operations consume RUs
- How to measure RU consumption
- How different query patterns affect RU cost
- Provisioned vs consumed RUs

This lab gives you hands-on experience measuring RUs for different scenarios.

### Index Policies

You need to know:
- How to create custom index policies
- The tradeoff between query performance and write/storage costs
- When to exclude paths from indexing
- How index policies are defined in JSON

The lab demonstrates creating containers with custom index policies and shows the dramatic performance difference.

### Data Modeling

The exam may test your understanding of:
- When to denormalize data
- Embedding data vs referencing
- Modeling for query patterns
- Tradeoffs between different modeling approaches

This lab directly compares two modeling approaches for the same data and shows the cost implications.

### Provisioning Models

You should understand:
- Standard provisioned throughput (demonstrated in this lab)
- Autoscale provisioning
- Serverless provisioning
- When to use each model

The lab uses standard provisioned throughput and references the alternatives.

### Container Configuration

The exam covers:
- Setting partition keys
- Allocating throughput
- Configuring index policies
- Using Azure CLI for Cosmos DB operations

All of these are practiced in this lab.

## Real-World Application

Beyond passing the exam, this lab teaches skills you'll use in production:

**Cost Optimization**: Understanding RU consumption is critical for controlling Cosmos DB costs in real applications. The techniques you learn here - measuring queries, optimizing indexes, and choosing data models - directly translate to cost savings.

**Performance Tuning**: Knowing that a poorly-indexed query costs 7x more RUs than an indexed query helps you design better applications.

**Architecture Decisions**: The bulk load pattern demonstrated here is a real architectural pattern used in production systems to reduce database load.

**Capacity Planning**: Being able to calculate RU consumption helps you right-size your Cosmos DB provisioning.

## Exam Question Types

You might see questions like:

- "What is the cost of a point read in Azure Cosmos DB?" (Answer: 1 RU for documents up to 100KB)
- "Which consistency level provides the best read performance?" (Answer: Eventual)
- "How do you reduce the cost of querying a large dataset?" (Multiple answers: use indexes, select specific fields, use partition keys, implement caching)
- "What is the difference between provisioned and serverless throughput?"

This lab gives you practical experience to answer these confidently.

## CLI Commands for the Exam

While the exam is scenario-based, knowing CLI syntax helps:

**Creating Cosmos DB resources:**
```
az cosmosdb create
az cosmosdb sql database create
az cosmosdb sql container create
```

**Key parameters:**
- `--throughput` for standard provisioned
- `--max-throughput` for autoscale
- `--partition-key-path` for partitioning
- `--idx` for index policies
- `--default-consistency-level` for consistency

## Integration with Other Services

Cosmos DB doesn't exist in isolation. The exam might test integration scenarios:
- Azure Functions triggered by Cosmos DB change feed
- Azure App Service applications using Cosmos DB
- Securing Cosmos DB with Managed Identities
- Monitoring Cosmos DB with Azure Monitor

This lab focuses on core Cosmos DB concepts, but these integrations build on this foundation.

## Summary

This lab is excellent exam preparation because it:
- Provides hands-on experience with Cosmos DB CLI commands
- Demonstrates measurable performance differences between approaches
- Teaches cost optimization - a key real-world skill
- Covers multiple exam objectives in one comprehensive scenario
- Builds practical understanding, not just theoretical knowledge

The skills you practice here - measuring, optimizing, and understanding Request Units - are fundamental to working with Cosmos DB and are definitely tested on the AZ-204 exam.
