# Kubernetes Troubleshooting - AZ-204 Exam Focus Script

**Duration:** 5-7 minutes
**Style:** Exam-focused instructional narration

---

## Opening: Why This Matters for AZ-204 (30 seconds)

Welcome to the AZ-204 exam perspective on Kubernetes troubleshooting! If you're preparing for Microsoft's Developing Solutions for Microsoft Azure certification, understanding container diagnostics and problem-solving is crucial. This isn't just about knowing kubectl commands - it's about demonstrating a systematic approach to identifying and resolving issues in containerized applications running on Azure Kubernetes Service.

Let's break down what Microsoft expects you to know and how this lab aligns with exam objectives.

---

## Exam Objective: Implement Containerized Solutions (1 minute)

The AZ-204 exam includes a section on implementing containerized solutions, and troubleshooting is a key component. Microsoft wants to verify that you can:

First, configure diagnostic settings and logging for containerized applications. This means understanding how to access container logs, interpret error messages, and trace application behavior.

Second, implement monitoring and alerting strategies. You need to identify when containers are failing, why they're failing, and how to prevent similar issues.

Third, diagnose and resolve container runtime issues. This includes understanding Pod lifecycle, health probes, resource constraints, and networking problems.

In a real AZ-204 exam scenario, you might see questions about why a Pod is stuck in Pending state, how to investigate CrashLoopBackOff errors, or how to verify Service-to-Pod connectivity. The hands-on lab we just completed covers all these scenarios.

---

## Core Concept 1: Diagnostic Commands and Their Purpose (1 minute 30 seconds)

Let's talk about the diagnostic toolkit you need to master for the exam. Microsoft expects you to know which commands to use and when.

**kubectl get** - This is your first line of investigation. On the exam, you'll need to recognize what different status values mean. For example, "Pending" indicates scheduling issues or resource constraints, "ImagePullBackOff" means container image problems, and "CrashLoopBackOff" indicates the container is starting but then failing.

**kubectl describe** - This is the deep diagnostic tool. The exam loves to test your ability to interpret the Events section. Can you identify that a Pod can't be scheduled because of insufficient CPU? Can you spot that a readiness probe is failing? This command shows you the "why" behind status problems.

**kubectl logs** - Essential for troubleshooting application-level issues. The exam might show you log output and ask you to identify the root cause. Remember, if a container is crashing repeatedly, you might need to use the "previous" flag to see logs from the crashed container.

**kubectl port-forward** - This lets you bypass the Service layer for direct testing. On the exam, this demonstrates your understanding of the networking model and isolation techniques for debugging.

For Azure Kubernetes Service specifically, you should also know about Azure Monitor integration and Container Insights, but the kubectl commands remain your primary troubleshooting interface.

---

## Core Concept 2: Pod Lifecycle and Health Probes (1 minute 30 seconds)

Health probes are a common exam topic because they directly impact application reliability. Let's review what you need to know:

**Readiness Probes** determine whether a Pod is ready to receive traffic. If the readiness probe fails, Kubernetes removes the Pod from Service endpoints. On the exam, you might see scenarios where Pods are running but the Service has no endpoints - this immediately points to a readiness probe or selector issue.

The key exam concepts here: What happens when a readiness probe fails? The Pod stays alive but doesn't receive traffic. How do you configure different probe types? You can use HTTP GET requests, TCP socket checks, or exec commands. What are the timing parameters? Initial delay, period, timeout, and failure threshold all affect how quickly Kubernetes detects problems.

**Liveness Probes** determine whether a container needs to be restarted. If the liveness probe fails, Kubernetes kills the container and starts a new one. On the exam, watch for scenarios involving restart counts - a high restart count usually indicates liveness probe failures.

Critical exam point: The difference between readiness and liveness. Readiness controls traffic routing, liveness controls container restarts. Configure them for different endpoints if your app needs time to warm up.

In our lab, we saw both probes misconfigured - wrong ports, wrong paths. These are exactly the types of realistic errors the exam tests.

---

## Core Concept 3: Resource Management and Constraints (1 minute)

Resource requests and limits are tested extensively on the AZ-204 exam. Here's what you need to understand:

**Resource Requests** tell Kubernetes how much CPU and memory a container needs. This affects Pod scheduling. If no node has enough available resources to meet the request, the Pod stays Pending.

**Resource Limits** set the maximum resources a container can use. If a container exceeds memory limits, it gets terminated with an OOMKilled status.

Exam scenarios often present Pods stuck in Pending state. The diagnostic approach: use kubectl describe to check Events, look for "Insufficient CPU" or "Insufficient memory" messages, then either reduce resource requests or scale your cluster.

In our lab, we saw an extreme example - thirty-two CPUs and one hundred twenty-eight gigabytes. The exam won't be that obvious, but the principle is the same: unrealistic resource requests prevent scheduling.

Also know the units: CPU is measured in millicores (m) or full cores. Memory uses standard units like Mi (mebibytes) or Gi (gibibytes). One thousand millicores equals one CPU core.

For Azure Kubernetes Service, understand that node sizes determine available resources, and you can scale node pools to add capacity.

---

## Core Concept 4: Service Networking and Connectivity (1 minute 15 seconds)

Service troubleshooting is another heavy exam topic. You need to understand the entire traffic flow from Service to Pod.

**Label Selectors** are the glue between Services and Pods. The Service selector must match the Pod labels exactly. Exam tip: if a Service has no endpoints, it's almost always a selector mismatch or no matching Pods.

**Port Configuration** has three layers you must understand. The Service port is what clients connect to. The target port is where traffic gets forwarded on the Pod. The container port is what the application listens on. The target port and container port must align.

On the exam, you might see questions about why traffic isn't reaching the application despite the Pod running. The diagnostic process: check Service endpoints with kubectl describe service, verify the selector matches Pod labels, and confirm port mappings are correct.

**NodePort Services** expose applications on a port across all cluster nodes. The valid range is 30000 to 32767. Our lab had NodePort 8020, which is invalid - the exam might test this boundary knowledge.

**LoadBalancer Services** in AKS provision an Azure Load Balancer. Know that this creates external IPs but takes time to provision. A pending external IP doesn't mean failure - it means Azure is still creating the resource.

---

## Core Concept 5: Common Error Patterns and Resolution (1 minute 15 seconds)

Let's review the error patterns you're likely to see on the exam and how to resolve them:

**ImagePullBackOff or ErrImagePull** - The container image can't be pulled. Check the image name for typos, verify the image exists in the registry, and confirm authentication if it's a private registry. For Azure Container Registry, ensure your AKS cluster has proper access.

**CrashLoopBackOff** - The container starts but immediately exits. Check the logs with kubectl logs, examine the container command and arguments, and verify environment variables and configuration.

**Pending** - The Pod can't be scheduled. Check resource requests with kubectl describe pod, look for node selectors or taints that prevent scheduling, and verify the cluster has available capacity.

**RunContainerError** - Kubernetes can't start the container runtime. Usually indicates problems with the container command, missing dependencies, or security context issues.

**0 out of 1 Ready** - The container is running but failing readiness checks. Verify the readiness probe configuration, ensure the application is actually listening on the expected port, and check if the probe path exists.

Our lab demonstrated all of these. The exam might present similar scenarios and ask you to identify the most likely cause or the correct resolution steps.

---

## Exam Strategy: The Systematic Approach (1 minute)

Here's the methodology you should demonstrate on exam questions:

**Step One:** Check high-level status with kubectl get. Identify which resources exist and their current state.

**Step Two:** Use kubectl describe on failing resources. Read the Events section carefully - Kubernetes usually tells you what's wrong.

**Step Three:** For running containers with issues, check logs with kubectl logs. Look for application errors or startup failures.

**Step Four:** Verify configuration relationships. Do selectors match labels? Do ports align? Are resource requests reasonable?

**Step Five:** Test connectivity in isolation. Use port-forward to bypass networking layers and verify the application itself works.

The exam rewards this systematic thinking. Multiple-choice questions often present scenarios where jumping to conclusions leads to wrong answers. The methodical approach ensures you identify the actual root cause.

---

## Azure-Specific Considerations (45 seconds)

While the troubleshooting techniques apply to any Kubernetes cluster, remember these Azure-specific points for the exam:

**Azure Monitor and Container Insights** provide enhanced logging and metrics. You should know how to enable these features and where to find container logs in the Azure portal.

**Azure Container Registry integration** requires proper authentication between AKS and ACR. Image pull errors might indicate missing role assignments.

**AKS diagnostics** in the Azure portal provide cluster-level health information. Know how to access node logs and control plane logs.

**Virtual network integration** can cause connectivity issues. Understand how AKS networking modes affect Service accessibility.

The exam might include scenarios where you need to troubleshoot both at the Kubernetes level and the Azure infrastructure level.

---

## Closing: Putting It All Together (30 seconds)

Troubleshooting containerized applications is a practical skill that the AZ-204 exam tests heavily. Master the diagnostic commands, understand Pod lifecycle and health probes, grasp resource management, know Service networking inside and out, and recognize common error patterns.

The lab we completed gave you hands-on experience with real troubleshooting scenarios. Practice these techniques, understand the systematic approach, and you'll be well-prepared for the exam's troubleshooting questions.

Remember: on the exam, they're not just testing if you know the commands - they're testing if you can think like a problem solver. Good luck with your AZ-204 preparation!
