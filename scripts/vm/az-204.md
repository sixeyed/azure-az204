# Virtual Machines - AZ-204 Exam Exercises

Virtual Machines appear in the AZ-204 exam primarily in the context of choosing the right compute service for different scenarios. While the exam focuses heavily on Platform as a Service offerings like App Service, Container Instances, and Azure Functions, you need to understand when Infrastructure as a Service solutions like VMs are the appropriate choice. The exam typically dedicates a smaller portion to VMs themselves, but understanding them is crucial for making architectural decisions that appear throughout the exam.

## Prerequisites

You should complete the basic VM lab before working through these exam-focused materials. Understanding how to create VMs, connect to them, and configure their resources provides the foundation you need. These exercises assume you're comfortable with the basics and ready to explore the decision-making frameworks and advanced concepts that appear in exam scenarios.

## AZ-204 Exam Skills Covered

The exam tests your ability to choose appropriate compute services for different scenarios, which means understanding when to use VMs versus alternatives. You need to know how to provision VMs using both the Azure Portal and Azure CLI because the exam might show you screenshots of portal workflows or code samples using CLI commands. Understanding VM dependencies is crucial because exam questions often ask about the resources that get created with a VM or what happens when you delete resources. VM sizes and their performance characteristics come up in scenarios involving cost optimization or performance requirements. Storage configuration with different disk types appears in questions about IOPS requirements or cost trade-offs. Networking concepts including Network Security Groups and public versus private IP addresses are fundamental to many exam scenarios. Managed identities for VMs are important because the exam heavily emphasizes security and eliminating credentials from code. Finally, you must understand how VMs compare to other compute options because scenario-based questions expect you to recommend the right service based on requirements.

## IaaS vs PaaS Decision Making

Understanding when to choose Virtual Machines versus Platform as a Service alternatives is perhaps the most important exam skill related to VMs. Microsoft has a clear preference for PaaS solutions in modern cloud applications, and the exam reflects this bias. You need to recognize the specific scenarios where VMs are the right answer.

Virtual Machines are appropriate when you need complete control over the operating system and installed software. Some applications require specific OS configurations, custom kernel modules, or drivers that aren't available in PaaS environments. Legacy applications that can't be easily containerized or refactored for cloud-native platforms often run best on VMs where you can replicate the exact environment they expect. When you need full administrative access to install custom software, configure system settings, or manage services at the OS level, VMs provide that flexibility.

However, PaaS alternatives should be your default choice for new cloud applications. When you want to focus on application code rather than infrastructure management, services like App Service handle the underlying platform for you. Automatic scaling and high availability without managing load balancers yourself makes PaaS attractive for variable workloads. Built-in patching and maintenance means Azure handles OS updates and security patches, reducing your operational burden. Cloud-native applications that follow modern design patterns work better with PaaS services that provide deployment slots, easy rollbacks, and integrated monitoring.

The exam presents scenarios where you must weigh these trade-offs. A question might describe an application with specific requirements and ask you to recommend the appropriate compute service. Look for clues like "requires specific kernel modules" or "legacy application that can't be modified" pointing toward VMs. Conversely, phrases like "needs to auto-scale based on HTTP requests" suggest App Service, while "event-driven processing" indicates Azure Functions, and "microservices architecture" points toward Container Apps or Azure Kubernetes Service.

## VM Creation and Configuration

The AZ-204 exam expects you to know how to provision Virtual Machines using both the Azure Portal and Azure CLI. Understanding both approaches helps you answer different types of exam questions, from scenario-based workflows to code completion exercises.

When using the Azure Portal, you follow a wizard-based workflow with several configuration tabs. You start by selecting or creating a resource group, which determines where your VM resources will be organized. The Basics tab requires you to choose your VM image, which determines the operating system and any pre-installed software. You select the VM size, which affects compute capacity, memory, network bandwidth, and cost. You configure authentication, choosing between SSH keys for Linux VMs or username and password combinations for Windows VMs. The portal also asks about networking configuration, including which ports to open for initial connectivity.

The Azure CLI approach uses the az vm create command with several key parameters. The resource group parameter specifies where to create the VM and its dependencies. The location parameter determines the Azure region for deployment, which affects latency, compliance, and pricing. The name parameter identifies your VM. The image parameter specifies the OS template, and you can use friendly names like UbuntuLTS or specific image URIs. The size parameter determines the compute capacity, and you should verify the size is available in your chosen region before attempting creation. Authentication options let you specify SSH keys or passwords depending on your security requirements.

Both approaches create the VM along with several dependent resources automatically. Understanding these dependencies is crucial for the exam because questions often ask about resource relationships or what happens during deletion. When you create a VM, Azure also creates or attaches a virtual network that provides network isolation and connectivity. A network interface connects your VM to the virtual network, acting as the virtual network card. A Network Security Group implements firewall rules controlling inbound and outbound traffic. A public IP address provides internet connectivity if you need external access, though it's optional and can be skipped for internal-only VMs. Managed disks store the operating system and any data volumes you attach.

## VM Sizes and Performance

Understanding Virtual Machine sizes and their performance characteristics is important for exam scenarios involving cost optimization or performance requirements. Azure offers several VM series, each optimized for different workload types, and the exam expects you to recommend appropriate sizes based on requirements.

A-Series VMs provide entry-level compute at low cost, suitable for development and testing scenarios where performance isn't critical. These VMs offer basic compute capacity at minimal cost, but they're not recommended for production workloads because they lack the performance guarantees of higher-tier series. The exam might present a development scenario where A-Series is appropriate, or a production scenario where you'd need to upgrade to a different series.

B-Series VMs are burstable instances designed for workloads with variable CPU usage. These VMs accumulate CPU credits when usage is below baseline, then consume those credits during bursts of activity. This makes them cost-effective for applications with low average utilization but occasional spikes. However, B-Series isn't suitable for steady-state production workloads because performance becomes unpredictable when credits are exhausted. Exam scenarios involving web servers with inconsistent traffic or development environments might suggest B-Series, while scenarios requiring consistent performance would rule them out.

D-Series VMs offer general-purpose compute with a balanced CPU-to-memory ratio. These are the default choice for most production workloads that don't have special requirements. D-Series provides consistent performance with a range of sizes from small to very large, making them suitable for web servers, application servers, and general business applications. When an exam scenario doesn't specify unusual requirements, D-Series is often the safe answer.

E-Series VMs are memory-optimized with higher RAM-to-CPU ratios. These VMs work well for databases, in-memory analytics, and applications that cache large datasets in memory. The exam might present scenarios involving SQL Server, Redis Cache, or SAP HANA that require memory-optimized instances. Recognizing that memory-intensive workloads need E-Series is an important skill.

F-Series VMs are compute-optimized with higher CPU-to-memory ratios. These instances provide more CPU power relative to memory, making them suitable for compute-intensive tasks like batch processing, web servers with high traffic, and gaming servers. Exam scenarios describing CPU-intensive processing or requiring fast single-threaded performance might call for F-Series.

N-Series VMs include GPU acceleration for machine learning, graphics rendering, and parallel computing workloads. These specialized instances cost significantly more than regular VMs but provide massive parallel processing capabilities. Exam scenarios involving deep learning training, video encoding, or graphics workloads indicate N-Series.

The VM size you choose affects multiple characteristics beyond just CPU and memory. It determines network bandwidth, with larger VMs providing higher throughput. It affects the maximum number of data disks you can attach, which matters for storage-intensive applications. It influences disk throughput and IOPS limits, impacting database and storage performance. And most visibly, it dramatically affects cost, with prices scaling up as you add more resources. The exam might present a scenario where you need to balance performance requirements against cost constraints, requiring you to choose the smallest VM size that meets the requirements.

## Storage and Disks

Understanding disk types and their performance characteristics is crucial for exam scenarios involving storage requirements, performance targets, or cost optimization. Azure offers several disk types, each with different performance and pricing characteristics.

Standard HDD provides the lowest cost storage option, using traditional spinning disk technology. These disks offer around five hundred IOPS with relatively high latency, making them suitable only for backup scenarios, cold storage, or non-critical workloads where performance isn't a concern. The exam might present a cost-sensitive scenario where Standard HDD is appropriate, but most production workloads require faster storage.

Standard SSD uses solid-state drives to provide better performance than HDD at a moderate cost. These disks offer improved IOPS and lower latency compared to Standard HDD, making them suitable for web servers, light database workloads, and production applications that don't require the highest performance. Standard SSD represents a good balance between cost and performance for many scenarios.

Premium SSD delivers high performance for production workloads using fast solid-state drives with guaranteed IOPS. These disks provide thousands of IOPS with sub-millisecond latency, essential for databases, transaction processing systems, and any latency-sensitive application. Premium SSD is what you'd recommend in exam scenarios involving SQL Server, critical business applications, or any requirement specifying low latency or high IOPS.

Ultra Disk provides the highest performance tier for mission-critical workloads requiring massive IOPS and consistent sub-millisecond latency. Ultra Disk offers configurable performance characteristics where you can independently set IOPS, throughput, and size. These specialized disks cost significantly more than Premium SSD but provide performance that exceeds what traditional storage can deliver. Exam scenarios describing extremely demanding database workloads or requiring specific IOPS guarantees might call for Ultra Disk.

Beyond understanding disk types, you need to know how disk management works. You can attach multiple data disks to a single VM, up to a limit determined by the VM size. This allows you to separate your OS disk from data disks, configure different performance tiers for different storage needs, or add capacity as requirements grow. You can resize disks to increase capacity, but it's important to know that you can only increase disk size, never decrease it. Taking snapshots of disks provides backup and recovery capabilities, creating point-in-time copies that you can use to restore data or create new disks. Disk encryption using Azure Disk Encryption protects data at rest, which is important for compliance and security requirements that appear in exam scenarios.

## Networking and Security

Network configuration and security are fundamental to Virtual Machines and appear frequently in exam scenarios. Understanding how Network Security Groups work, the difference between public and private IP addresses, and various connectivity options is essential for the AZ-204 exam.

Network Security Groups act as distributed firewalls controlling traffic to and from your VMs. Each NSG contains security rules that allow or deny traffic based on several criteria. Rules specify the port number being accessed, such as port twenty-two for SSH, port three thousand three hundred eighty-nine for RDP, port eighty for HTTP, or port four hundred forty-three for HTTPS. Rules define the protocol as TCP, UDP, or Any to match all protocols. Rules specify source and destination using IP address ranges, service tags representing Azure services, or application security groups representing logical collections of VMs. Each rule has a priority number where lower numbers are processed first, allowing you to create specific allow rules that take precedence over broader deny rules.

Understanding when to open which ports is important for exam scenarios. SSH on port twenty-two provides terminal access to Linux VMs for management and administration. RDP on port three thousand three hundred eighty-nine provides graphical remote desktop access to Windows VMs. HTTP on port eighty and HTTPS on port four hundred forty-three allow web traffic if you're hosting web applications. The exam might present a scenario where you need to configure NSG rules to allow specific traffic while blocking everything else, following the security principle of least privilege.

Public IP addresses versus private IP addresses represents another important concept. Public IPs enable direct connectivity from the internet to your VM, which is necessary for public-facing services but creates a larger attack surface. Private IPs are used for internal VNet communication between Azure resources, providing isolation from the internet. You can configure IPs as static, meaning the address never changes, or dynamic, meaning Azure assigns an address that might change when you stop and start the VM. The exam might ask you to choose between public and private IPs based on security requirements or connectivity needs.

Azure provides several connectivity options beyond simple public IPs. Azure Bastion offers secure browser-based RDP and SSH connectivity without requiring public IP addresses on your VMs. This service creates a secure tunnel through the Azure Portal, eliminating the need to expose management ports to the internet. VPN connections provide encrypted tunnels between on-premises networks and Azure, suitable for hybrid scenarios. ExpressRoute offers private, dedicated connections between on-premises infrastructure and Azure, bypassing the public internet entirely for better performance and security. The exam might describe connectivity requirements and expect you to recommend the appropriate option.

## Managed Identities

Managed identities for Virtual Machines are an important exam topic because they represent the recommended approach for authenticating to Azure services without storing credentials in code or configuration. The exam places heavy emphasis on security best practices, and managed identities are a core part of that.

System-assigned managed identities are created with the VM and automatically deleted when you delete the VM. Each VM can have one system-assigned identity, and that identity exists only as long as the VM exists. This tight coupling makes system-assigned identities simple to manage because you don't have to worry about orphaned identities after VM deletion. When you enable a system-assigned managed identity, Azure automatically registers it in Azure Active Directory and configures the VM to use it.

User-assigned managed identities are created as independent Azure resources that you can assign to one or more VMs. These identities persist even after you delete the VMs they're assigned to, which provides flexibility for scenarios where multiple VMs need to share the same identity or where you want the identity to outlive individual VMs. User-assigned identities require more management overhead but offer more flexibility in complex scenarios.

Both types of managed identities work the same way from the application's perspective. Your code running on the VM can request an access token from the Azure Instance Metadata Service endpoint without providing any credentials. Azure automatically validates the request based on the VM's identity and returns a token that your application can use to authenticate to Azure services. This eliminates the need to store connection strings, passwords, or certificates in your application configuration.

The exam frequently tests managed identities in scenarios involving accessing Azure storage, connecting to databases, or calling other Azure services. When you see a question describing a VM that needs to access Azure resources and asking how to authenticate securely, managed identity is almost always the answer. The alternative approaches like storing credentials in configuration files, using connection strings with keys, or embedding passwords in code are all security anti-patterns that the exam expects you to avoid.

## Availability and Scaling

While not the primary focus of the basic VM lab, understanding availability and scaling concepts is important for the AZ-204 exam. Questions often present scenarios requiring high availability or the ability to scale, and you need to know which Azure features address these requirements.

Availability Sets protect against hardware failures within a single datacenter by distributing your VMs across multiple fault domains and update domains. Fault domains represent different hardware racks with separate power and network connections, so a hardware failure affects only VMs in one fault domain. Update domains allow Azure to perform maintenance on a portion of your VMs at a time, ensuring some instances remain running during planned maintenance. Availability Sets provide ninety-nine point nine five percent uptime SLA but only protect against datacenter-level failures, not regional outages.

Availability Zones protect against entire datacenter failures by deploying your VMs across physically separate facilities within an Azure region. Each zone has independent power, cooling, and networking. Deploying VMs across zones provides higher availability than Availability Sets, with a ninety-nine point nine nine percent uptime SLA. However, Availability Zones require you to manage replication and synchronization between zones yourself. The exam might present a scenario requiring maximum availability and expect you to recognize that Availability Zones provide the highest level of datacenter redundancy.

Virtual Machine Scale Sets automate the scaling process by maintaining a group of identical VMs that can automatically increase or decrease based on demand or schedule. Scale sets eliminate the need to manually create and configure individual VMs, and they integrate with load balancers to distribute traffic across instances. You can configure autoscaling rules based on metrics like CPU utilization, memory usage, or custom application metrics. The exam often presents scenarios involving variable load or unpredictable traffic patterns where scale sets provide the solution.

Load Balancers distribute incoming traffic across multiple VM instances, providing both availability and horizontal scaling. Azure offers different types of load balancers for different scenarios. The Basic Load Balancer provides simple Layer 4 load balancing within a single availability set. The Standard Load Balancer supports availability zones, health probes, and more advanced features. Application Gateway operates at Layer 7, providing HTTP-level routing and web application firewall capabilities. The exam might describe load distribution requirements and expect you to choose the appropriate load balancer type.

## Cost Management

Understanding Virtual Machine cost factors is important for exam scenarios involving cost optimization. Azure charges for VMs based on multiple factors, and the exam expects you to recognize opportunities to reduce costs while meeting requirements.

VM size is the primary cost driver, with larger sizes commanding higher hourly rates. The cost scales roughly linearly with resources, so a VM with twice the CPU and memory costs approximately twice as much. Understanding this relationship helps you choose appropriately sized VMs that aren't over-provisioned for their workload. The exam might present a scenario where an application is running on an oversized VM and ask how to reduce costs without impacting performance.

Region selection affects pricing because Azure charges different rates in different geographies. Generally, established regions cost less than newly opened regions, and some countries or regions have higher costs due to local factors. When performance and compliance allow, choosing less expensive regions can reduce costs. The exam might ask about cost optimization strategies where region selection is a factor.

License type matters for Windows VMs because Azure Hybrid Benefit allows you to use existing Windows Server licenses to reduce Azure costs. If your organization already owns Windows Server licenses with Software Assurance, you can apply them to Azure VMs and pay only for compute costs, not licensing. This can reduce Windows VM costs by up to forty percent. The exam might present a scenario involving Windows Server migration where Azure Hybrid Benefit should be part of your answer.

Reserved Instances provide significant discounts when you commit to one or three year terms. Reservations can reduce costs by up to seventy-two percent compared to pay-as-you-go pricing, making them attractive for steady-state workloads with predictable usage. However, you must commit to the reservation period and can't get refunds if your needs change. The exam might describe a stable production workload and ask how to optimize costs, where reserved instances would be the appropriate answer.

Spot VMs allow you to use spare Azure capacity at heavily discounted rates, often seventy to ninety percent below regular pricing. The catch is that Azure can evict your Spot VMs with thirty seconds notice when it needs the capacity back. This makes Spot VMs suitable only for fault-tolerant, interruptible workloads like batch processing, rendering farms, or stateless web workers. The exam might present a scenario involving batch processing or other interruptible workloads where Spot VMs provide massive cost savings.

Automatic shutdown schedules help reduce costs by stopping VMs during non-business hours. Many development and test environments only need to run during working hours, and automatically stopping them evenings and weekends can reduce monthly costs by sixty to seventy percent. The exam might ask about cost optimization for non-production environments where scheduled shutdown would be appropriate.

## Integration with Other Services

Virtual Machines rarely exist in isolation, and understanding how they integrate with other Azure services is important for the exam. Many scenarios involve VMs accessing storage accounts, databases, or other Azure resources, and you need to know the best practices for these integrations.

Connecting to Azure Storage from VMs should use managed identities rather than storage account keys. Your application code requests a token using the VM's managed identity, then uses that token to authenticate to the Storage API. This eliminates the need to store storage account keys in configuration files or retrieve them from Key Vault. The exam emphasizes this pattern because it's more secure and easier to manage than credential-based authentication.

Accessing Azure SQL Database from VMs should also use managed identities with Azure AD authentication. You configure your database to allow Azure AD authentication, then grant your VM's managed identity the appropriate database roles. Your connection string specifies Azure AD authentication, and the database uses the managed identity to validate access. This approach eliminates SQL authentication with usernames and passwords, which is a security best practice the exam tests repeatedly.

Retrieving secrets from Azure Key Vault is a common pattern for VMs that need to access third-party services or other resources requiring credentials. Rather than storing secrets in configuration files, your application retrieves them at runtime from Key Vault using the VM's managed identity for authentication. This centralizes secret management and provides audit logging of access. The exam frequently tests this pattern as the secure way to handle secrets.

Monitoring with Azure Monitor and Application Insights provides visibility into VM performance and application behavior. Azure Monitor collects metrics like CPU usage, memory utilization, disk IOPS, and network throughput. Application Insights provides deeper application-level telemetry including request rates, failure rates, and dependency tracking. Understanding how to enable these monitoring capabilities is important for exam scenarios involving troubleshooting or performance optimization.

## Exam Study Points

Several key concepts about Virtual Machines appear repeatedly in the AZ-204 exam and deserve special attention. The IaaS versus PaaS decision-making framework is fundamental because many scenario questions hinge on choosing the right compute service. Remember that VMs are appropriate when you need OS-level control or are migrating legacy applications, but PaaS alternatives like App Service should be your default choice for new cloud applications.

VM creation requires understanding both Portal workflows and CLI commands because different exam questions test each approach. Know the key parameters for az vm create and understand what dependent resources get created automatically. This knowledge helps with questions about resource relationships and lifecycle management.

Resource dependencies including virtual networks, network interfaces, Network Security Groups, public IPs, and managed disks are crucial because the exam asks what happens when you delete resources or need to configure specific capabilities. Understanding that VM deletion doesn't automatically delete all associated resources is important for cost management scenarios.

VM sizes and series matter for performance and cost questions. Know when to recommend A-Series for development, B-Series for burstable workloads, D-Series for general purpose, E-Series for memory-intensive applications, F-Series for compute-intensive tasks, and N-Series for GPU workloads. Recognize that size affects not just CPU and memory but also network bandwidth, disk limits, and cost.

Disk types and their performance characteristics come up in scenarios specifying IOPS requirements or cost constraints. Standard HDD is only for cold storage, Standard SSD for moderate workloads, Premium SSD for production databases and latency-sensitive applications, and Ultra Disk for extreme performance requirements.

Networking concepts including NSG rules, port numbers for common protocols, and the difference between public and private IPs appear in many questions. Know when to use Azure Bastion for secure management access without public IPs.

Managed identities are the recommended authentication method for VMs accessing Azure services, eliminating credentials from code. The exam heavily emphasizes this security best practice. System-assigned identities are simpler but tied to VM lifecycle, while user-assigned identities offer more flexibility.

Availability options including Availability Sets for datacenter-level redundancy, Availability Zones for higher availability across datacenters, and Virtual Machine Scale Sets for automatic scaling all address different scenario requirements. Know which to recommend based on SLA requirements and scaling needs.

Cost optimization strategies including choosing appropriate VM sizes, using Azure Hybrid Benefit for Windows licensing, purchasing Reserved Instances for steady workloads, using Spot VMs for interruptible tasks, and implementing automatic shutdown for development environments all help reduce costs while meeting requirements.

The exam tests practical application of these concepts through scenario-based questions. You'll see descriptions of business requirements or technical constraints and need to recommend appropriate solutions. Understanding not just what Virtual Machines can do but when they're the right choice compared to other compute options is what separates good answers from great answers on the exam.

## Cleanup

When you're finished with VM exercises, deleting the resource group removes all associated resources including the VM, disks, network interfaces, public IPs, virtual networks, and Network Security Groups. Using the yes flag skips the confirmation prompt, and the no-wait flag allows the deletion to proceed in the background. This cleanup is important not only for cost management but also because the exam sometimes includes questions about proper resource lifecycle management and avoiding unnecessary charges. Understanding that you should delete entire resource groups when you're done with a project, rather than leaving orphaned resources that continue to cost money, is a best practice the exam expects you to know.
