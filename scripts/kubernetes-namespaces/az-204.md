# Kubernetes Namespaces - AZ-204 Exam Focus
## Exam-Relevant Concepts and Skills

---

## Introduction

Welcome! This script focuses specifically on the AZ-204 exam aspects of Kubernetes Namespaces. If you're preparing for the Microsoft Azure Developer Associate certification, this is essential knowledge for the "Implement Azure solutions" domain.

Let's break down exactly what you need to know and why it matters for the exam.

---

## AZ-204 Exam Context

The AZ-204 exam tests your ability to develop solutions for Microsoft Azure, including container-based applications. While the exam focuses on Azure services, it expects deep understanding of container orchestration, which means Kubernetes knowledge is essential.

Specifically for Azure Kubernetes Service, you need to demonstrate:

- How to organize and structure containerized applications
- How to implement security boundaries and access controls
- How to manage resources and prevent resource contention
- How to separate environments and implement deployment strategies

Namespaces are the core mechanism for all of these requirements.

---

## Exam Topic 1: Resource Organization

**What the exam expects you to know:**

Microsoft wants you to understand how to organize Azure resources logically and efficiently. In the context of AKS, this means using namespaces to structure your applications.

**Key exam concepts:**

First, namespace-per-application strategy. In production AKS clusters, you'll typically create a separate namespace for each major application. This provides clear boundaries and makes it easier to apply policies, resource quotas, and access controls per application.

For example, your e-commerce platform might have:
- The "frontend" namespace for web applications
- The "api" namespace for backend services
- The "data" namespace for data processing workloads

Second, namespace-per-environment strategy. In non-production clusters, you might organize by environment instead. You'd have "dev", "test", and "staging" namespaces. This is common in lower environments where cost efficiency matters and you want multiple teams sharing cluster resources.

**Exam scenario example:**

You might see a question like: "Your organization needs to deploy multiple microservices in AKS, each owned by different teams. How do you ensure logical separation and independent management?"

The answer involves creating separate namespaces per team or application, allowing each team to manage their resources independently while sharing the underlying cluster infrastructure.

---

## Exam Topic 2: Role-Based Access Control (RBAC)

**What the exam expects you to know:**

Security is a major focus of AZ-204. You need to understand how to implement proper access controls in Azure Kubernetes Service.

**Key exam concepts:**

Namespaces are the fundamental unit for Kubernetes RBAC. When you create Role and RoleBinding resources in Kubernetes, they're scoped to a specific namespace. This lets you implement fine-grained access control.

In Azure, this integrates with Azure Active Directory. You can map Azure AD identities to Kubernetes RBAC roles at the namespace level.

**Typical RBAC pattern:**

Let's say you have junior developers who should only access the dev namespace:
- Create a Role in the dev namespace with limited permissions
- Create a RoleBinding that connects that Role to an Azure AD group
- Junior developers can now kubectl into the dev namespace but can't see or modify production

For senior engineers who need production access:
- Create a different Role in the production namespace with more permissions
- Create a RoleBinding for the senior engineers Azure AD group
- They can now deploy to production

**Exam scenario example:**

"Your team needs to ensure developers can deploy to development namespaces but only view production resources. How do you configure access?"

The answer involves using namespaced Roles and RoleBindings with appropriate permissions, integrated with Azure AD for authentication.

---

## Exam Topic 3: Resource Quotas and Limits

**What the exam expects you to know:**

Resource management is critical in shared Kubernetes environments. You need to prevent any single application from consuming all cluster resources.

**Key exam concepts:**

ResourceQuota objects are applied per namespace. They let you limit:
- Total CPU and memory across all pods in the namespace
- Number of pods, services, and other objects
- Storage resources

LimitRange objects define default and maximum limits for individual containers within a namespace.

**Practical example for AKS:**

Imagine your AKS cluster has 100 CPU cores total. You might allocate:
- Production namespace: 60 cores maximum
- Staging namespace: 20 cores maximum
- Development namespace: 15 cores maximum
- Reserve: 5 cores for system overhead

This prevents the dev team from accidentally spinning up too many pods and starving production workloads.

**Exam scenario example:**

"Your AKS cluster is experiencing performance issues because development workloads are consuming too many resources. What's the most efficient solution?"

The answer is implementing ResourceQuotas on the development namespace to cap total resource usage, ensuring production workloads always have resources available.

---

## Exam Topic 4: Environment Separation

**What the exam expects you to know:**

Microsoft emphasizes proper separation between development, testing, and production environments. In AKS, namespaces are your primary tool for this.

**Key exam concepts:**

Environment separation strategies:

Strategy one: Separate clusters. Production gets its own AKS cluster, non-production environments share a different cluster with namespace separation. This is most secure but more expensive.

Strategy two: Single cluster with strict namespace separation. Use namespaces like "prod", "staging", "dev" with strong RBAC and network policies. More cost-effective but requires careful security configuration.

Strategy three: Namespace-per-environment-per-app. In a shared cluster, you might have "ecommerce-prod", "ecommerce-staging", "ecommerce-dev" namespaces. This combines application and environment isolation.

**Azure-specific considerations:**

In Azure, you'll also use:
- Azure AD pod identity scoped to namespaces
- Azure Key Vault integration per namespace
- Azure Monitor container insights with namespace filtering
- Azure Policy for Kubernetes enforcing namespace-level requirements

**Exam scenario example:**

"Your organization wants to minimize Azure costs while maintaining security between environments. What deployment strategy should you use for AKS?"

The answer involves using a single AKS cluster with separate namespaces for each environment, implementing RBAC and network policies for security, and using ResourceQuotas to manage resource allocation.

---

## Exam Topic 5: Service Discovery and DNS

**What the exam expects you to know:**

Application components need to communicate with each other. Understanding how DNS works across namespaces is essential for the exam.

**Key exam concepts:**

Within a namespace, services can reference each other by simple names:
- A pod in the "frontend" namespace can access "api-service" if that service is also in the "frontend" namespace

Across namespaces, you must use fully-qualified domain names:
- Format: service-name DOT namespace DOT svc DOT cluster DOT local
- Example: "api-service.backend.svc.cluster.local"

**Best practices for Azure:**

Always use FQDNs in application configuration. Store these in ConfigMaps or Azure App Configuration. This makes your deployment explicit and prevents DNS resolution failures.

For production Azure deployments, consider using Azure Service Mesh or Istio for advanced traffic management across namespaces.

**Exam scenario example:**

"Your frontend application in the 'web' namespace needs to connect to a backend API in the 'services' namespace. What endpoint should you configure?"

The answer is using the FQDN format: "api-service.services.svc.cluster.local" to ensure cross-namespace DNS resolution works correctly.

---

## Exam Topic 6: Deployment Patterns

**What the exam expects you to know:**

You need to understand how to structure Kubernetes manifests for maintainable, production-ready deployments in AKS.

**Key exam concepts:**

Proper manifest organization:
- Always include the namespace definition in your manifest set
- Name it with a prefix like "01-namespace.yaml" to ensure creation order
- Explicitly set the namespace in every resource's metadata
- Group related resources in the same directory

Using kubectl effectively:
- Deploy entire directories: `kubectl apply -f my-app/`
- Use the `-n` flag to override namespace: `kubectl apply -f pod.yaml -n staging`
- Check deployments across namespaces: `kubectl get all -A`

**Azure DevOps integration:**

In exam scenarios involving CI/CD:
- Azure Pipelines can deploy to specific namespaces
- Use different service connections for different namespaces
- Implement approval gates for production namespace deployments
- Use Helm charts with namespace templating

**Exam scenario example:**

"You need to deploy the same application to dev, test, and production namespaces in AKS using Azure DevOps. How do you structure this?"

The answer involves creating parameterized manifests or Helm charts where the namespace is a variable, with separate Azure Pipeline stages for each environment, deploying to the appropriate namespace.

---

## Exam Topic 7: Monitoring and Logging

**What the exam expects you to know:**

Azure Monitor integration with AKS is namespace-aware. You need to understand how to filter and organize monitoring data by namespace.

**Key exam concepts:**

Azure Monitor Container Insights:
- Can filter logs and metrics by namespace
- Create alerts specific to namespace resource usage
- Dashboard views organized by namespace
- Cost allocation and chargeback based on namespace consumption

Log Analytics queries:
- Filter container logs by namespace
- Aggregate metrics per namespace
- Create workbooks showing namespace-level health

**Practical application:**

You might create Azure dashboards showing:
- CPU and memory usage per namespace
- Pod restart counts per namespace
- Application errors grouped by namespace
- Request rates and latencies per namespace

This gives you operational visibility aligned with your organizational structure.

**Exam scenario example:**

"Your team needs to monitor application performance separately for each microservice team in AKS. How do you configure Azure Monitor?"

The answer involves using namespace-based filtering in Azure Monitor Container Insights, creating separate Log Analytics queries per namespace, and setting up namespace-specific alerts and dashboards.

---

## Exam Topic 8: Security and Network Policies

**What the exam expects you to know:**

Network security within AKS clusters, especially using network policies scoped to namespaces.

**Key exam concepts:**

Network Policies are namespace-scoped. You can:
- Deny all traffic to pods in a namespace by default
- Allow traffic only from specific namespaces
- Implement microsegmentation between applications

**Azure-specific security:**

Combine Kubernetes namespaces with:
- Azure Network Policies or Calico
- Azure Firewall for egress control per namespace
- Azure Private Link for secure access to Azure services
- Pod Identity scoped to namespaces for Azure resource access

**Example policy pattern:**

A production namespace might have policies that:
- Only allow ingress from the "frontend" namespace
- Only allow egress to specific Azure SQL and Storage endpoints
- Deny all other traffic by default

**Exam scenario example:**

"Your AKS cluster needs to ensure the production namespace can only be accessed from the API gateway namespace. How do you implement this?"

The answer involves creating a NetworkPolicy in the production namespace that allows ingress only from pods labeled as part of the API gateway namespace, denying all other traffic.

---

## Exam Topic 9: Lifecycle Management

**What the exam expects you to know:**

How to manage the lifecycle of namespaced applications in AKS.

**Key exam concepts:**

Creating namespaces:
- Via kubectl: `kubectl create namespace my-app`
- Via YAML: Define Namespace resource and apply it
- Via Azure Portal or Azure CLI for AKS

Updating resources:
- Apply changes to specific namespaces
- Rolling updates happen within namespace boundaries
- ConfigMap and Secret updates affect namespace scope

Deleting namespaces:
- Deleting a namespace deletes ALL resources within it
- This is powerful but dangerous - be careful!
- Use label selectors for bulk operations: `kubectl delete ns -l env=dev`

**Azure DevOps and automation:**

Implement GitOps workflows where:
- Each namespace has its own Git directory
- Changes to the directory trigger deployments to that namespace
- Automated testing before merging to production namespace configs

**Exam scenario example:**

"You need to completely remove a microservice and all its resources from AKS. What's the most efficient approach?"

The answer is deleting the namespace containing that microservice, which automatically removes all deployments, services, configmaps, secrets, and other resources in a single operation.

---

## Exam Topic 10: Cost Management

**What the exam expects you to know:**

Cost allocation and optimization in shared AKS environments using namespace-based organization.

**Key exam concepts:**

Cost allocation:
- Azure Cost Management can show AKS costs
- Use namespace labels to tag resources for chargeback
- Implement ResourceQuotas to cap costs per team/application
- Monitor resource utilization per namespace

**Optimization strategies:**

Right-size resources per namespace:
- Use HorizontalPodAutoscaler within namespace limits
- Set appropriate resource requests and limits
- Use VerticalPodAutoscaler recommendations per namespace

Consolidate workloads:
- Multiple teams/apps sharing a cluster with namespace separation is more cost-effective than separate clusters
- But balance cost savings against security and isolation requirements

**Exam scenario example:**

"Your organization wants to implement a chargeback model where each application team pays for their AKS resource usage. How do you enable this?"

The answer involves organizing applications in separate namespaces, applying appropriate labels for cost tracking, setting ResourceQuotas per namespace, and using Azure Cost Management with tags to allocate costs to each team based on their namespace consumption.

---

## Key Exam Takeaways

Let me summarize what you absolutely must know for the AZ-204 exam regarding Kubernetes Namespaces in AKS:

**Number one:** Namespaces provide logical isolation for applications and environments. Know when to use namespace-per-app versus namespace-per-environment strategies.

**Number two:** RBAC is scoped to namespaces. Understand how to integrate Azure AD with Kubernetes RBAC for namespace-level access control.

**Number three:** Resource quotas and limit ranges are applied per namespace. Know how to prevent resource contention in shared clusters.

**Number four:** Service DNS resolution changes across namespaces. Always use FQDNs for cross-namespace communication.

**Number five:** Network policies are namespace-scoped. Understand how to implement microsegmentation between namespaces.

**Number six:** Azure Monitor and logging can be filtered by namespace. Know how to set up namespace-specific monitoring and alerts.

**Number seven:** Namespace deletion removes all contained resources. This is both powerful and dangerous - understand the implications.

**Number eight:** Manifest organization matters. Include namespace definitions and set explicit namespaces in all resource specs.

---

## Common Exam Pitfalls to Avoid

Let me warn you about common mistakes candidates make on the exam:

**Mistake one:** Thinking namespaces provide network isolation by default. They don't! You need NetworkPolicies for actual network security.

**Mistake two:** Forgetting that service accounts are namespace-scoped. Each namespace has its own "default" service account.

**Mistake three:** Not knowing that some resources are cluster-scoped, not namespace-scoped. Nodes, PersistentVolumes, and StorageClasses aren't in namespaces.

**Mistake four:** Assuming you can nest namespaces. You can't - it's a flat, single-level hierarchy.

**Mistake five:** Not understanding that contexts save you from typing `-n namespace` every time, but can also lead to mistakes if you forget which namespace you're in.

---

## Practice Scenarios

When studying, practice these exam-style scenarios:

**Scenario one:** Design a namespace strategy for an organization with 10 microservices, three environments, and five development teams.

**Scenario two:** Implement RBAC so developers can deploy to dev/test but only view production resources.

**Scenario three:** Configure resource quotas to ensure no namespace can consume more than 30% of cluster resources.

**Scenario four:** Set up Azure Monitor to alert when any namespace exceeds 80% of its quota.

**Scenario five:** Structure Kubernetes manifests and Azure DevOps pipelines for multi-namespace deployment.

---

## Closing

Understanding Kubernetes Namespaces is fundamental to succeeding on the AZ-204 exam. Microsoft expects you to design and implement container solutions that are secure, scalable, and well-organized.

Namespaces are the foundation for all of this in Azure Kubernetes Service. They enable multi-tenancy, resource management, security boundaries, and operational clarity.

As you prepare for the exam, make sure you can:
- Explain when and why to use namespaces
- Implement RBAC at the namespace level
- Configure resource quotas and limits
- Set up proper service communication across namespaces
- Integrate namespaces with Azure services like Azure AD, Azure Monitor, and Azure DevOps

Practice these concepts hands-on in an AKS cluster. The exam will test your practical knowledge, not just theory.

Good luck with your AZ-204 preparation! You've got this!
