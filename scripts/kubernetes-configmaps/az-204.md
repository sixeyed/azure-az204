# Kubernetes ConfigMaps - AZ-204 Exam Focus

**Format:** Exam preparation and key concepts narration

---

## Introduction to ConfigMaps for AZ-204

Welcome to the AZ-204 exam focus section for Kubernetes ConfigMaps. If you're preparing for the Azure Developer Associate certification, understanding how to externalize and manage application configuration is crucial. ConfigMaps are a fundamental part of this, especially when deploying containerized solutions to Azure Kubernetes Service.

Let's focus on the specific concepts and skills that are most relevant to the exam.

---

## AZ-204 Exam Objectives Covered

*[SHOW ON SCREEN: Exam objectives checklist]*

ConfigMaps relate to several key objectives in the AZ-204 exam. First, they're part of implementing containerized solutions. You need to understand how to package applications into containers and configure them appropriately.

Second, they demonstrate your knowledge of application configuration management. The exam tests your ability to separate configuration from code, manage settings across different environments, and implement proper security practices.

Third, ConfigMaps show your understanding of cloud-native patterns, specifically the Twelve-Factor App methodology that's widely adopted in Azure and Kubernetes environments.

---

## Key Concept 1: Externalizing Configuration

*[SHOW ON SCREEN: Diagram showing image + config = deployed app]*

The most important concept here is externalization. In traditional applications, configuration was often hardcoded or stored in configuration files within the application package. This meant rebuilding or redeploying the entire application for configuration changes.

In containerized environments, we build the image once and use it across all environments. The configuration is external to the image, stored in ConfigMaps. This is a fundamental shift in thinking that the exam expects you to understand.

For the exam, remember this principle: your container image should be environment-agnostic. The same image should run in development, testing, and production, with only the ConfigMap changing.

---

## Key Concept 2: ConfigMaps vs. Secrets

*[SHOW ON SCREEN: Side-by-side comparison table]*

The exam will likely test your understanding of when to use ConfigMaps versus Secrets. Here's the key difference: ConfigMaps are for non-sensitive configuration data, while Secrets are for sensitive information like passwords, tokens, and connection strings.

ConfigMaps store data as plain text. Anyone with access to your cluster can read them. They're perfect for API endpoints, feature flags, application settings, and other non-sensitive data.

Secrets provide basic encoding—not encryption, just base64 encoding—and they have additional access controls. For the exam, know that you should never store passwords or API keys in ConfigMaps.

In Azure Kubernetes Service, you can integrate with Azure Key Vault for even better secret management, using the Secrets Store CSI driver. This is considered a best practice for production workloads.

---

## Key Concept 3: Environment Variables

*[SHOW ON SCREEN: Pod spec showing env and envFrom sections]*

Environment variables are one of two primary methods for injecting ConfigMap data into containers. For the exam, you need to understand both the simple env approach and the envFrom approach.

Using env, you can selectively pick individual keys from a ConfigMap. This is useful when you only need a few specific values, or when you want to rename variables as you inject them.

Using envFrom, you load all keys from a ConfigMap as environment variables at once. This is more convenient when you have many settings, but be careful—all the ConfigMap's keys become environment variables, which could cause naming conflicts.

Remember that environment variables are set when the container starts. If you update the ConfigMap, you need to restart the Pod for the new values to take effect. This is different from volume mounts, which we'll discuss next.

---

## Key Concept 4: Volume Mounts

*[SHOW ON SCREEN: Pod spec showing volumes and volumeMounts sections]*

The second method is mounting ConfigMaps as volumes. This creates files in the container's filesystem. For the exam, understand the two-step process: first, you define a volume at the Pod level that references the ConfigMap, then you mount that volume into the container at a specific path.

Volume mounts have some advantages over environment variables. They support more complex configuration formats like complete JSON or XML files. They're not visible to all processes, which is more secure. And importantly, when you update the ConfigMap, the files are automatically updated in running containers after a short delay—though the application still needs to reload the configuration.

For the exam, know that you can mount multiple ConfigMaps to different paths, and you can even mount specific keys from a ConfigMap as individual files instead of the entire ConfigMap.

---

## Key Concept 5: Configuration Hierarchy

*[SHOW ON SCREEN: Layered diagram showing config sources]*

Understanding configuration hierarchy is critical for the exam. Applications typically read configuration from multiple sources, and there's an order of precedence. A common hierarchy might be: command-line arguments override environment variables, which override configuration files, which override default values.

The exact hierarchy depends on the application framework. For example, ASP.NET Core applications follow a specific order, as do Spring Boot applications and Node.js applications. For the exam, understand that you need to know your application's hierarchy to configure it correctly.

This is why in our lab, the environment variable setting took precedence over the JSON file setting. The application was configured to prioritize environment variables.

---

## Key Concept 6: Updating Configuration

*[SHOW ON SCREEN: Diagram showing ConfigMap update flow]*

For the exam, understand what happens when you update a ConfigMap. If your Pod uses environment variables from the ConfigMap, those environment variables don't change in running Pods. You must restart the Pods—which usually means updating the Deployment to trigger a rolling update.

If your Pod uses volume mounts, the files are automatically updated in running containers, but your application must reload the configuration to use the new values. Some applications support hot reload, others require a restart.

This is an important operational consideration. In production, you need a strategy for rolling out configuration changes safely.

---

## Key Concept 7: Creating ConfigMaps

*[SHOW ON SCREEN: Multiple kubectl create configmap examples]*

The exam may test your knowledge of different ways to create ConfigMaps. The most common method is using YAML manifests, which we've seen in the lab. This is declarative and fits well with GitOps practices.

But you can also create ConfigMaps imperatively using kubectl create configmap. You can create them from literal values using the from-literal flag, from files using the from-file flag, or from entire directories using from-env-file.

Each method has its use case. Literal values are good for quick testing. From-file is useful when you have existing configuration files. From-env-file is perfect when you have environment-specific property files.

For the exam, be familiar with the syntax of these commands, even if YAML is more common in practice.

---

## Key Concept 8: ConfigMaps in Azure Kubernetes Service

*[SHOW ON SCREEN: Azure portal showing AKS with ConfigMap integration]*

When working specifically with Azure Kubernetes Service, there are some additional considerations. ConfigMaps work exactly the same way in AKS as in any Kubernetes cluster, but you have additional integration options.

You can use Azure DevOps or GitHub Actions to automate ConfigMap deployment as part of your CI/CD pipeline. You can store ConfigMap YAML files in Azure Repos or GitHub and apply them automatically.

For sensitive configuration, you can use the Azure Key Vault provider for Secrets Store CSI driver. This lets you reference Azure Key Vault secrets directly from your Pod specs, without storing them in Kubernetes Secrets or ConfigMaps at all.

You can also use Azure App Configuration with Kubernetes, though this is more advanced and may be beyond the scope of AZ-204.

---

## Common Exam Scenarios

*[SHOW ON SCREEN: Scenario-based question examples]*

Let's talk about how ConfigMaps might appear in exam questions. You might see a scenario where an application needs different connection strings for different environments. The correct answer would involve using ConfigMaps with environment-specific values, not hardcoding connection strings in the image.

You might encounter a question about updating configuration in a running application. The answer depends on whether you're using environment variables—which require Pod restart—or volume mounts—which update automatically.

You might be asked to identify security issues, like storing passwords in ConfigMaps instead of Secrets, or not using Azure Key Vault for highly sensitive data.

You might need to debug why configuration isn't being applied. Common issues include: the Pod not referencing the ConfigMap correctly, the ConfigMap being in a different namespace, or configuration hierarchy causing one source to override another.

---

## Best Practices for the Exam

*[SHOW ON SCREEN: Best practices checklist]*

Here are the best practices you should know for the exam. First, never store sensitive data in ConfigMaps. Always use Secrets or Azure Key Vault.

Second, use descriptive names for your ConfigMaps. Something like "app-config-production" is better than "config1". This makes it clear what the ConfigMap is for.

Third, version your ConfigMap names or use labels to track versions. Some teams include version numbers in ConfigMap names, like "app-config-v1" and "app-config-v2". This makes rollbacks easier.

Fourth, document your configuration hierarchy. Make sure your team knows which settings take precedence and why.

Fifth, in production, store your ConfigMap YAML files in version control alongside your application code. This provides an audit trail and enables GitOps workflows.

Sixth, validate your ConfigMaps before applying them. Make sure they have the correct format and all required keys.

And seventh, in Azure Kubernetes Service, use managed identities and Azure RBAC to control who can create and modify ConfigMaps.

---

## Integration with Other Azure Services

*[SHOW ON SCREEN: Azure services integration diagram]*

For the exam, understand how ConfigMaps fit into the broader Azure ecosystem. You might use Azure Container Registry to store your container images, Azure Kubernetes Service to run your containers, and ConfigMaps to configure them.

You could use Azure DevOps for CI/CD pipelines that build images, push them to ACR, and deploy them to AKS with appropriate ConfigMaps.

You might integrate with Azure Monitor and Application Insights to track configuration changes and their impact on application behavior.

And as mentioned, Azure Key Vault integration is important for managing secrets alongside your ConfigMaps.

---

## Troubleshooting ConfigMaps

*[SHOW ON SCREEN: kubectl commands for troubleshooting]*

For the exam, know how to troubleshoot ConfigMap issues. Use kubectl get configmap to list all ConfigMaps in a namespace. Use kubectl describe configmap to see the details of a specific ConfigMap, including all its key-value pairs.

Use kubectl exec to run commands inside containers and verify that environment variables are set correctly or that files are mounted at the expected paths.

If a ConfigMap update isn't taking effect, check whether you're using environment variables—which require Pod restart—or volume mounts—which update automatically but require application reload.

If you get errors about ConfigMaps not being found, check that the ConfigMap and Pod are in the same namespace, and that the name in the Pod spec exactly matches the ConfigMap name.

---

## Practical Tips for Exam Questions

*[SHOW ON SCREEN: Exam strategy tips]*

When you encounter ConfigMap questions on the exam, read carefully to identify whether the scenario involves sensitive data. If so, ConfigMaps are probably not the right answer.

Look for keywords like "without rebuilding the image" or "different settings per environment"—these often point to ConfigMap-based solutions.

Pay attention to whether the question asks about initial deployment or updating running applications. The approach differs significantly.

If you see YAML in the question, carefully check the syntax. Common mistakes include incorrect indentation, wrong field names like using configMap instead of configMapRef, or forgetting to define the volume before mounting it.

And remember, in multiple-choice questions about Kubernetes configuration, if one option suggests hardcoding values in the Dockerfile and another suggests using ConfigMaps, ConfigMaps are almost always the correct cloud-native approach.

---

## Summary for AZ-204 Success

*[SHOW ON SCREEN: Key takeaways checklist]*

To wrap up, here's what you absolutely need to know about ConfigMaps for the AZ-204 exam.

ConfigMaps store non-sensitive configuration data. They externalize configuration from container images. They can be consumed as environment variables or as files via volume mounts.

Environment variables from ConfigMaps require Pod restart for updates. Volume mounts update automatically but applications need to reload configuration.

Always use Secrets or Azure Key Vault for sensitive data, never ConfigMaps.

ConfigMaps support cloud-native patterns and enable the same image to run in multiple environments with different configurations.

In Azure Kubernetes Service, ConfigMaps integrate with Azure DevOps, Azure Key Vault, and other Azure services for complete application lifecycle management.

Master these concepts, practice with the hands-on labs, and you'll be well-prepared for any ConfigMap questions on the exam.

Good luck with your AZ-204 preparation!

---

*[END OF SCRIPT]*
