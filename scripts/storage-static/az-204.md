# Static Websites with Azure Storage - AZ-204 Exam Exercises

Static website hosting with Azure Storage appears in the AZ-204 exam across multiple domains, making it an important topic to master. Understanding static websites is crucial for the exam because it represents a serverless hosting approach that eliminates compute management and provides cost-effective global distribution.

## Prerequisites

You should complete the basic static website lab before focusing on exam-specific topics. Understanding how to enable static website hosting, upload content, and configure CDN are fundamental skills. These exercises assume you're comfortable with the basics and ready to explore the scenarios and decision-making that appear on the exam.

## AZ-204 Exam Skills Covered

The exam tests your knowledge across several interconnected skills. Develop Azure compute solutions appears because static websites represent a serverless hosting approach that eliminates traditional compute management. Develop for Azure Storage is the primary domain, including configuring storage accounts for specific use cases, working with blob storage containers and access tiers, understanding storage redundancy options, and implementing storage account endpoints and access patterns. Implement Azure security comes into play through understanding how static website access differs from direct blob access, which demonstrates important security concepts and access control patterns.

## Static Website Configuration

Static website configuration requires understanding several key concepts that appear regularly on the exam. Enabling static website hosting requires setting specific blob service properties through the service-properties update command. The dollar-web container is automatically created when you enable the feature and has special access rules that differ from normal blob containers. You must configure two document types - the index document which loads for directory requests and the 404 error document for missing content. The static website endpoint is distinct from the blob endpoint, serving content through a different domain optimized for web traffic.

The dollar-web container behaves differently from standard containers in important ways. Blobs inside aren't directly accessible via the standard blob endpoint for security reasons, preventing direct blob URL access. They're served through the static website endpoint which is optimized for web serving with proper HTTP headers and content types. This separation provides better security by preventing unauthorized access through blob URLs and cleaner URLs without query strings or container names visible in paths, improving the user experience.

## Storage Redundancy for Static Websites

The AZ-204 exam tests your knowledge of different redundancy levels and when each is appropriate. For static websites, certain patterns emerge that you should recognize. Locally Redundant Storage provides three copies in one datacenter at the lowest cost, suitable for non-critical static sites where cost optimization is the priority. Geo-Redundant Storage provides six copies across two regions with no read access to secondary, offering disaster recovery but requiring failover for secondary access. Read-Access Geo-Redundant Storage provides six copies with read access to secondary region, making it particularly useful for static websites because they're read-heavy workloads that benefit from geographic distribution. Zone-Redundant Storage provides three copies across availability zones in a single region, offering good availability without the cost of geo-replication. Geo-Zone-Redundant Storage combines zone redundancy in primary with geo-redundancy to secondary, providing the highest level of protection.

For static websites specifically, RA-GRS is particularly valuable because it provides high availability through geographic distribution, read access from secondary region for additional access points, lower cost than full GRS with read-write access, and automatic failover capabilities if the primary region fails. The exam might present a scenario with global users requiring high availability - RA-GRS would be appropriate there, balancing cost and availability.

## Access Patterns and Security

Understanding the dual access model is crucial for exam scenarios. Blob endpoint access through standard blob URLs is not publicly accessible even when static website is enabled, protecting content from unauthorized direct access. Static website endpoint access provides public access through the dedicated static website domain, optimized for web serving with appropriate caching headers. This layered security demonstrates Azure's defense-in-depth approach - you control exactly how content is accessed, with the static website endpoint serving public content while the blob endpoint remains protected. The exam may present scenarios requiring you to choose the appropriate access method or explain why certain access attempts fail.

## CDN Integration

Azure CDN is a separate service that appears in multiple exam domains, and understanding how it integrates with static websites is important. CDN Profiles serve as containers for CDN endpoints, defining the pricing tier and capabilities. CDN Endpoints are the actual domain names users access, with format endpoint-name.azureedge.net. The Origin is the source of content, which in this case is your static website endpoint. Origin Host Header must match the static website domain for proper routing and content serving. Caching behavior means content is cached at edge locations globally, improving performance but requiring cache management. Purge operations force CDN to refresh cached content when you need immediate updates.

Creating and managing CDN involves a standard pattern. Create a CDN profile with the appropriate SKU - Standard_Microsoft provides good global coverage and features. Create an endpoint pointing to your static website domain as the origin. Set the origin-host-header to match your static website domain for proper routing. Wait for propagation as the configuration replicates across the global CDN network. Monitor content delivery and cache behavior to ensure optimal performance.

Content delivery and propagation have timing characteristics you need to understand. Initial propagation time means CDN endpoints take several minutes to become active after creation as configuration replicates globally. Cache duration determines how long content remains cached based on CDN rules and HTTP headers from the origin. Update propagation means changes to origin don't immediately reflect in CDN because of caching, which is intentional for performance. Purge operations force CDN cache refresh when needed, invalidating cached content and fetching fresh copies from origin.

## Common Exam Scenarios

The exam presents scenario-based questions requiring you to apply your knowledge. When a company needs to host a marketing website that must remain available even if an Azure region fails, where the site content changes monthly, recommend RA-GRS for geo-redundancy with read access from secondary region and consider CDN for global distribution and caching of relatively static monthly content. The key is balancing availability requirements with update frequency.

When users still see old content after deploying content updates to a static website, you should check if CDN is being used because aggressive caching causes this. Verify cache settings and consider implementing cache-control headers for better control. The answer involves purging CDN cache to force immediate refresh, either for specific paths or the entire endpoint. Understanding cache behavior prevents this issue in production deployments.

When you receive an error trying to download files directly from the dollar-web container using the blob endpoint, recognize that static website content must be accessed through the static website endpoint, not the blob endpoint. This is by design for security and proper content serving. The blob endpoint is protected even though static website is enabled, demonstrating Azure's layered security model.

## Integration and Advanced Topics

Static websites integrate with other Azure services for enhanced functionality. Azure Front Door provides an alternative to CDN with additional routing capabilities like URL-based routing and header-based routing. Azure DNS enables custom domain configuration for static websites, allowing you to use your own domain instead of the Azure-provided domain. Azure Key Vault stores connection strings and access keys securely, avoiding hard-coded credentials. Azure Monitor provides logging and metrics for storage accounts and CDN, tracking usage and performance.

Cost optimization is important for exam questions about architecture decisions. Storage costs are based on blob storage used, with standard pricing for stored content. Redundancy costs increase with higher redundancy options like geo-replication. CDN costs are based on data transfer and number of requests, with pricing varying by region. Egress charges apply for data transfer out of Azure, but CDN can reduce this by caching content at edge locations. Static websites on blob storage are typically the lowest cost option compared to App Service static site hosting, virtual machines with web servers, or container-based solutions.

## Best Practices for the Exam

Best practices align with how Microsoft expects solutions to be designed. Know the dollar-web container is automatically created and has special properties for web serving. Understand geo-replication timing because it's not instantaneous - check lastSyncTime to verify sync completion. Remember CDN propagation delays for both initial setup and cache purge operations, which can take several minutes. Recognize security by default where the static website endpoint is public but the blob endpoint is not, providing layered access control. Use RA-GRS for read-heavy scenarios as it provides cost-effective high availability for content that's primarily read.

## Summary

For the AZ-204 exam, ensure you can enable and configure static website hosting on storage accounts with correct index and error documents. Choose appropriate storage redundancy for different scenarios balancing cost, availability, and performance. Understand access patterns and security for static websites, knowing when to use each endpoint type. Deploy and manage Azure CDN endpoints for global content delivery and caching. Troubleshoot common issues with static websites and CDN including cache staleness and access errors. Optimize costs while meeting availability requirements through appropriate tier and redundancy choices. This lab provides hands-on experience with all these concepts, making them practical rather than just theoretical knowledge for the exam.
