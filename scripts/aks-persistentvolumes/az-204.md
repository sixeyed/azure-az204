# Kubernetes Storage - AZ-204 Exam Relevance

## Overview

This lab covers essential topics for the AZ-204 exam, specifically focusing on developing solutions for Azure Container Services. Let's discuss how these concepts map to the exam objectives.

## Exam Domain: Implement containerized solutions

The AZ-204 exam includes a domain on implementing containerized solutions, which covers both Azure Container Instances and Azure Kubernetes Service. This lab specifically addresses AKS storage concepts that appear in the exam.

### Storage in Azure Kubernetes Service

You need to understand how Kubernetes manages storage in Azure. This includes:

**Storage abstractions** - The exam may ask you to identify which storage type is appropriate for different scenarios. You need to know the difference between ephemeral storage, EmptyDir volumes, and PersistentVolumes.

**PersistentVolumeClaims** - You should understand how to request persistent storage in Kubernetes without being tied to specific Azure resources. The PVC abstraction is key to maintaining portability while still using Azure storage services.

**Storage Classes** - This is an important exam topic. You need to know that AKS provides multiple storage classes, each backed by different Azure services. The exam might present scenarios where you need to choose between Azure Disk and Azure Files based on requirements.

## Key Concepts for the Exam

### ConfigMaps and Volumes

The exam tests your understanding of how to configure containerized applications. ConfigMaps are a common way to inject configuration into containers without rebuilding images. You should know:

- How to create a ConfigMap containing configuration files
- How to mount a ConfigMap as a volume in a Pod
- That ConfigMaps are typically read-only when mounted

This pattern appears in real-world scenarios and exam questions about application configuration management.

### Container Storage Lifecycle

Understanding the lifecycle of container storage is critical. The exam may present scenarios where you need to determine what happens to data when containers or Pods are replaced.

**Container filesystem** - Data written to the container filesystem is lost when the container is recreated. This is ephemeral by design.

**EmptyDir volumes** - These survive container restarts within the same Pod, but are lost when the Pod is deleted. This is useful for temporary caching or sharing data between containers in the same Pod.

**PersistentVolumes** - These outlive individual Pods and persist until explicitly deleted. This is what you use for stateful applications.

### Azure Storage Integration

A key exam topic is understanding how AKS integrates with Azure storage services:

**Azure Managed Disks** - The default storage class in AKS uses Azure managed disks. These provide high-performance block storage but can only be attached to one node at a time. This is perfect for databases or applications that need fast I/O.

**Azure Files** - The azurefile storage class uses Azure File Shares, which support SMB protocol and can be mounted by multiple Pods across multiple nodes simultaneously. This is ideal for shared storage scenarios.

The exam might present a scenario where you need to choose between these options based on requirements like shared access, performance, or multi-node deployment.

### Storage Classes and Dynamic Provisioning

You should understand that Kubernetes can dynamically provision Azure storage resources based on PersistentVolumeClaims. The exam may test:

- How Storage Classes define different types of storage with different properties
- How to specify a storage class in a PVC
- What happens when you don't specify a storage class (the default is used)
- The properties that differentiate storage classes (access modes, performance, pricing)

## Practical Scenarios for the Exam

Let's look at some scenario-based questions you might encounter:

### Scenario 1: Stateful Application Storage

"You're deploying a web application with a database to AKS. The database needs persistent storage that survives Pod restarts and updates. What should you use?"

**Answer**: Create a PersistentVolumeClaim and mount it to the database container. The PVC will provision an Azure Managed Disk by default, providing persistent storage with good I/O performance.

### Scenario 2: Shared Configuration Files

"Your application needs to read configuration files that are the same across all Pods. The configuration should be updated without redeploying containers. What's the best approach?"

**Answer**: Use a ConfigMap to store the configuration and mount it as a volume in your Pods. ConfigMaps can be updated independently of Pod deployment, and all Pods will see the updated configuration.

### Scenario 3: Multi-Pod File Sharing

"You have multiple Pods that need to read and write to the same files simultaneously. Which storage class should you use?"

**Answer**: Use the azurefile storage class in your PVC. Azure Files supports multiple concurrent connections, unlike Azure Managed Disks which can only attach to one node at a time.

### Scenario 4: Temporary Cache Storage

"Your application generates temporary cache files that don't need to persist beyond the Pod lifecycle. What's the most efficient storage approach?"

**Answer**: Use an EmptyDir volume. This provides fast local storage that's automatically cleaned up when the Pod is deleted, without the overhead of provisioning Azure storage resources.

## Connection to Other AZ-204 Topics

This lab connects to several other exam domains:

**Azure Storage services** - Understanding how AKS uses Azure Managed Disks and Azure Files connects to the broader Azure Storage domain. The same concepts of blob storage, file shares, and disk storage apply here.

**Application configuration** - Using ConfigMaps to inject configuration demonstrates cloud-native configuration management, which relates to Azure App Configuration and other configuration services.

**Scalability** - Understanding storage classes helps you design scalable solutions. Knowing when to use shared storage versus node-specific storage is crucial for horizontal scaling.

**Monitoring and troubleshooting** - The kubectl exec commands we used to inspect files inside containers are important troubleshooting techniques. The exam may ask about troubleshooting containerized applications.

## Best Practices for the Exam

When answering AKS storage questions on the exam, remember:

1. **Match storage to requirements** - Choose based on whether you need persistence, sharing, and performance characteristics.

2. **Consider lifecycle** - Think about what happens to data when containers, Pods, or nodes are replaced.

3. **Use abstractions** - Prefer PVCs over directly specifying Azure resources. This provides portability and follows Kubernetes best practices.

4. **Know the defaults** - Understand what happens when you don't specify a storage class or access mode.

5. **Think about cost** - Azure Managed Disks and Azure Files have different pricing models. The exam may present cost optimization scenarios.

## Summary

This lab demonstrates core AKS storage concepts that directly map to AZ-204 exam objectives. Make sure you understand:

- How to configure volumes and volume mounts in Kubernetes
- The difference between ephemeral and persistent storage
- How PersistentVolumeClaims work with Storage Classes
- When to use Azure Managed Disks versus Azure Files
- How to inject configuration using ConfigMaps

These concepts appear frequently in exam questions and are essential for developing production solutions on Azure Kubernetes Service.
