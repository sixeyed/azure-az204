# Kubernetes Deployments - AZ-204 Exam Focus

**Style:** Conversational narration focusing on exam preparation
**Target:** AZ-204 certification candidates

---

## Opening

If you're preparing for the AZ-204 exam, this section is specifically for you. Let's talk about what Microsoft expects you to know about Kubernetes Deployments and how to apply these concepts when working with Azure Kubernetes Service.

The exam focuses on practical implementation skills, not just theory. So let's break down the key concepts you'll need to master.

---

## Exam Objective: Implement Container Solutions

In the "Implement container solutions" section of AZ-204, you're expected to create and manage container apps using Azure Kubernetes Service. Deployments are at the heart of this objective.

Let's talk about what that really means in exam terms.

---

## Key Concept 1: Declarative vs Imperative Management

**[Screen: Side-by-side comparison graphic]**

This is crucial for the exam. You need to understand the difference between imperative and declarative approaches.

Imperative means running commands like "kubectl scale" or "kubectl create". You're telling Kubernetes exactly what action to perform. This is fine for quick testing or troubleshooting, but not for production.

Declarative means defining your desired state in YAML files and using "kubectl apply". You describe what you want the end result to be, and Kubernetes figures out how to get there.

Here's what you need to remember for the exam: Microsoft strongly emphasizes declarative management using YAML manifests stored in source control. If an exam question asks about production deployments or CI/CD pipelines, think declarative.

You might see a scenario question like: "Your team needs to deploy updates to a production application in AKS. What's the best approach?" The answer will involve YAML manifests, not imperative commands.

---

## Key Concept 2: Deployment Strategies

The exam loves to test your understanding of different deployment strategies. Let's break them down.

**[Screen: Deployment strategies comparison]**

**Rolling Updates** - This is the default strategy for Deployments. New Pods are gradually created while old Pods are terminated. The application stays available throughout. This is what you use when you can tolerate both versions running simultaneously for a brief period.

For the exam, know that rolling updates are controlled by parameters like "maxSurge" and "maxUnavailable". These control how many Pods can be created above the desired count, and how many can be unavailable during the update.

**Recreate Strategy** - All existing Pods are killed before new ones are created. This causes downtime but ensures only one version runs at a time. Use this when your application can't handle multiple versions running together, like when there are database schema changes.

**Blue-Green Deployments** - This isn't a built-in Deployment strategy, but you can implement it with multiple Deployments and Service label selectors. Both versions run fully, but traffic switches instantly from one to the other. This is what the lab challenge was about!

For the exam, understand when to use each strategy. Rolling updates for most scenarios, recreate when you need clean version separation, and blue-green when you need instant rollback capability.

---

## Key Concept 3: Scaling Applications

Scaling is a major exam topic. You need to understand both manual and automatic scaling.

**[Screen: Scaling concepts diagram]**

**Manual Scaling** - You can scale by updating the replica count in your Deployment YAML. Remember, do this declaratively! Update the YAML and apply it.

You should know the command "kubectl scale" exists for imperative scaling, but also know when it's appropriate to use it - typically only for testing or emergency situations.

**Horizontal Pod Autoscaler** - This is huge for the exam. HPA automatically scales the number of Pods based on metrics like CPU utilization or custom metrics from Azure Monitor.

You might see questions like: "Your application experiences variable load throughout the day. How do you ensure it scales automatically?" The answer involves creating a Horizontal Pod Autoscaler resource.

Here's a key exam tip: Understand the relationship between resource requests, resource limits, and autoscaling. The HPA uses the resource requests you define in your Pod spec to determine when to scale. If you don't specify resource requests, autoscaling based on CPU won't work!

---

## Key Concept 4: Application Lifecycle Management

The exam tests your understanding of the complete application lifecycle: deploy, update, monitor, and rollback.

**[Screen: Lifecycle diagram]**

**Deployment** - You should know how to create Deployments using YAML manifests. Understand all the key fields: replicas, selector, template, and strategy.

**Updates** - Know how to update a Deployment by modifying the container image or configuration. Understand that the Deployment keeps a revision history, which is essential for rollbacks.

**Monitoring** - While we didn't focus on this in the lab, for the exam, know that you can check Deployment status with "kubectl rollout status" and view history with "kubectl rollout history".

**Rollback** - This is critical! Know the command "kubectl rollout undo" to roll back to the previous revision. You can also roll back to a specific revision using the "--to-revision" flag.

An exam scenario might ask: "After deploying a new version, users report errors. What's the fastest way to restore service?" The answer is to roll back the Deployment.

---

## Key Concept 5: Labels and Selectors

Labels and selectors are fundamental to how Deployments work, and the exam tests this extensively.

**[Screen: Labels and selectors diagram]**

Understand that:
- Deployments use selectors to find their Pods
- Services use selectors to find Pods to route traffic to
- You can have multiple labels on a Pod
- The labels in your Pod template must match the Deployment selector

Here's a common exam trap: A question shows a Deployment with a selector that doesn't match the Pod template labels. You need to identify this as an error configuration.

Also, understand how to use labels for organization - like environment labels, version labels, or team labels. These help with querying and organizing resources in large clusters.

---

## Key Concept 6: Health Checks and Readiness

While not covered in detail in the basic lab, health checks are exam-relevant.

**[Screen: Liveness and readiness probe diagram]**

You should know about:

**Liveness Probes** - Kubernetes restarts Pods if the liveness probe fails. This detects applications that are running but in a broken state.

**Readiness Probes** - Kubernetes removes Pods from Service endpoints if the readiness probe fails. This ensures traffic only goes to Pods that are ready to handle requests.

During a rolling update, readiness probes are crucial. New Pods must pass their readiness checks before old Pods are terminated. This ensures zero downtime.

For the exam, understand when to use each type of probe and how they affect rolling updates and traffic routing.

---

## Key Concept 7: Resource Management

Resource requests and limits are important for both pod scheduling and performance.

**[Screen: Resource requests and limits graphic]**

**Requests** - The minimum resources guaranteed to a Pod. Kubernetes uses this for scheduling decisions. If a node doesn't have enough available resources to meet the request, the Pod won't be scheduled there.

**Limits** - The maximum resources a Pod can use. If a Pod tries to exceed its memory limit, it gets terminated. If it exceeds its CPU limit, it gets throttled.

For the exam, know that:
- Resource requests are essential for Horizontal Pod Autoscaler to work
- Limits prevent a single Pod from consuming all node resources
- You define these in the Pod template within your Deployment

A typical exam question might show a Deployment where Pods are stuck in "Pending" state, and you need to identify that the resource requests are too high for available nodes.

---

## Key Concept 8: Integration with Azure Services

Remember, this is the AZ-204 exam, so it's not just about Kubernetes in general - it's about Azure Kubernetes Service specifically.

**[Screen: AKS and Azure integration diagram]**

Know how Deployments in AKS integrate with Azure services:

**Azure Container Registry** - Your Deployment pulls images from ACR. Understand how AKS authenticates to ACR using managed identities or service principals.

**Azure Monitor** - You can monitor Deployment health and Pod metrics using Azure Monitor Container Insights.

**Azure Key Vault** - Deployments can inject secrets from Key Vault into Pods using the Secrets Store CSI driver.

**Azure DevOps or GitHub Actions** - Your CI/CD pipeline updates Deployments by applying new YAML manifests. Know the typical pipeline flow: build image, push to ACR, update Deployment YAML, apply to AKS.

---

## Exam Question Patterns

Let's talk about the types of questions you'll see about Deployments.

**[Screen: Question type examples]**

**Scenario-based questions** - These give you a business requirement and ask you to choose the right approach. For example: "A company needs to deploy updates with zero downtime and instant rollback capability. What deployment strategy should they use?"

**Troubleshooting questions** - These show you a problem and ask you to identify the cause or solution. For example: "Pods are stuck in ContainerCreating state. The Deployment references an image in ACR. What's the likely issue?"

**Implementation questions** - These ask you to select the correct command or YAML configuration. For example: "Which command rolls back a Deployment to the previous revision?"

**Best practice questions** - These test whether you know the recommended approach. For example: "What's the best way to manage Deployment configurations in a production environment?" The answer is declarative YAML in source control.

---

## Practice Scenarios

Let me give you some practice scenarios similar to what you might see on the exam.

**[Screen: Scenario 1]**

**Scenario 1**: Your application in AKS needs to handle varying traffic loads throughout the day. During peak hours, you need up to 10 replicas, but normally you only need 2. What should you implement?

The answer is a Horizontal Pod Autoscaler. You'd set minimum replicas to 2, maximum to 10, and configure it to scale based on CPU utilization or custom metrics.

**[Screen: Scenario 2]**

**Scenario 2**: After deploying a new version, monitoring shows increased error rates. You need to immediately restore the previous version. What command do you use?

The answer is "kubectl rollout undo deploy/[deployment-name]". This immediately triggers a rollback to the previous revision.

**[Screen: Scenario 3]**

**Scenario 3**: Your team is deploying a new database schema version along with an application update. The new application version requires the new schema, and the old version can't work with it. What deployment strategy should you use?

This requires the "Recreate" strategy because you can't have both versions running simultaneously. Set "strategy.type: Recreate" in your Deployment YAML.

**[Screen: Scenario 4]**

**Scenario 4**: Your company requires all production deployments to be traceable and repeatable. Developers sometimes use "kubectl create" and "kubectl scale" commands directly. What should you implement?

The answer is to enforce declarative deployment using YAML manifests in source control with a CI/CD pipeline. You might also implement Azure Policy to restrict direct imperative changes.

---

## Common Exam Mistakes to Avoid

Let me share some common mistakes candidates make on exam questions about Deployments.

**[Screen: Common mistakes list]**

**Mistake 1**: Choosing imperative commands for production scenarios. Remember, declarative YAML is the production-appropriate approach.

**Mistake 2**: Forgetting that environment variable changes require new Pods. You can't update environment variables in running Pods.

**Mistake 3**: Not understanding the relationship between Deployments, ReplicaSets, and Pods. The hierarchy is: Deployment creates ReplicaSet, ReplicaSet creates Pods.

**Mistake 4**: Thinking rolling updates can update ALL Pod fields. Some fields, like the Pod name pattern or certain security settings, require recreating the entire Deployment.

**Mistake 5**: Not knowing that you need resource requests defined for CPU-based autoscaling to work.

---

## Key Takeaways for the Exam

Let's wrap up with the absolute must-know points for the AZ-204 exam.

**[Screen: Key takeaways checklist]**

**One**: Deployments are controllers that manage Pods using templates and label selectors. Know this relationship inside and out.

**Two**: Always prefer declarative YAML management for production scenarios. Imperative commands are for testing only.

**Three**: Understand rolling updates: they maintain availability by gradually replacing Pods. Know how to configure and customize them.

**Four**: Know how to rollback: "kubectl rollout undo" is your friend. Deployments maintain revision history for this purpose.

**Five**: Understand scaling: both manual scaling with replicas and automatic scaling with HPA.

**Six**: Know the different deployment strategies: rolling update, recreate, and blue-green. Understand when to use each.

**Seven**: Understand how Deployments integrate with Azure services: ACR for images, Azure Monitor for observability, Key Vault for secrets.

**Eight**: Be able to troubleshoot common issues: wrong image references, insufficient resources, selector mismatches, failed health checks.

---

## Study Recommendations

Here's how I recommend you prepare for the Deployment questions on AZ-204.

**[Screen: Study plan]**

**First**, practice hands-on. Don't just read about Deployments - create them, update them, scale them, and roll them back. Muscle memory helps during the exam.

**Second**, understand the YAML structure completely. Be able to identify errors in YAML manifests. Microsoft loves to show you configurations with subtle mistakes.

**Third**, know your kubectl commands. Especially: apply, get, describe, scale, rollout status, rollout history, and rollout undo.

**Fourth**, understand the integration points with Azure services. How does AKS authenticate to ACR? How do you monitor Deployments with Azure Monitor?

**Fifth**, practice scenario-based thinking. When you see a requirement, immediately think: "What deployment strategy fits this? What scaling approach? What about rollback?"

---

## Final Exam Tips

One last set of tips specifically for exam day.

**[Screen: Exam tips graphic]**

Read questions carefully. If a question emphasizes "production environment" or "enterprise deployment", think declarative YAML and best practices. If it says "quick test" or "development environment", imperative commands might be acceptable.

Watch for keywords. "Zero downtime" means rolling updates. "Instant rollback" might mean blue-green. "Variable load" suggests autoscaling. "Incompatible versions" suggests recreate strategy.

Eliminate obviously wrong answers first. If an answer suggests manually creating individual Pods in production, that's wrong. If it suggests using imperative commands in a CI/CD pipeline, that's wrong.

Trust your hands-on experience. If you've worked through the labs, you'll recognize correct patterns. Your practical knowledge is your best asset.

---

## Closing

You now have a solid understanding of Kubernetes Deployments from an AZ-204 exam perspective. You know the key concepts, common question patterns, and how to think through scenarios.

Remember, the exam isn't trying to trick you. It's testing whether you understand how to implement container solutions in Azure Kubernetes Service using best practices. Deployments are fundamental to that objective.

Keep practicing, understand the "why" behind each concept, and you'll do great on this section of the exam.

Good luck with your AZ-204 certification!

---

**[END OF AZ-204 FOCUS]**
