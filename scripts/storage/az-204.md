# Azure Storage Accounts - AZ-204 Exam Focus

## Introduction

For the AZ-204 exam, understanding Azure Storage is critical. Storage accounts are one of the core services you'll need to know in depth, both conceptually and practically.

In this video, we'll focus on the key aspects of Azure Storage that appear on the exam, including storage account types, redundancy options, access control, and programmatic access patterns.

## Storage Account Fundamentals

The AZ-204 exam expects you to understand storage account naming and configuration requirements.

**Naming Rules**: Storage account names must be globally unique, lowercase letters and numbers only, between 3 and 24 characters. This is a common exam question - watch for scenarios asking about valid or invalid storage account names.

**Performance Tiers**: You need to know the difference between Standard and Premium tiers. Standard uses HDDs and is suitable for most workloads. Premium uses SSDs and is required for scenarios requiring low latency or high IOPS.

**Account Kinds**: The exam may test your knowledge of different account types:
- General Purpose v2 - the recommended default for most scenarios
- Premium Block Blob - for high-performance scenarios
- Premium File Share - for file shares requiring premium performance

## Data Redundancy Options

This is a heavily tested topic on the AZ-204 exam. You must understand all redundancy options and when to use each.

**Locally Redundant Storage - LRS**:
- Replicates data three times within a single datacenter
- Lowest cost option
- Protects against server rack and drive failures
- Does NOT protect against datacenter-wide disasters
- Eleven nines of durability

**Zone Redundant Storage - ZRS**:
- Replicates across three availability zones in the primary region
- Higher availability than LRS
- Protects against datacenter failures
- Twelve nines of durability
- Important: Not available in all regions

**Geo-Redundant Storage - GRS**:
- Replicates to a secondary region hundreds of miles away
- Provides disaster recovery capabilities
- Secondary region data is not accessible for reads unless you initiate a failover
- Sixteen nines of durability

**Read-Access Geo-Redundant Storage - RA-GRS**:
- Same as GRS but allows read access to the secondary region
- Ideal for high availability read scenarios
- Exam tip: This is the option when the scenario requires reading from a secondary region without failover

**Geo-Zone-Redundant Storage - GZRS** and **RA-GZRS**:
- Combines ZRS in the primary region with GRS
- Highest level of durability and availability
- Useful for mission-critical applications

## Blob Storage Access Tiers

The AZ-204 exam includes questions about blob access tiers. Know these scenarios:

**Hot Tier**:
- Optimized for frequently accessed data
- Higher storage costs, lower access costs
- Use for active data sets

**Cool Tier**:
- Optimized for infrequently accessed data stored for at least 30 days
- Lower storage costs, higher access costs
- Examples: short-term backup, disaster recovery

**Archive Tier**:
- Optimized for rarely accessed data stored for at least 180 days
- Lowest storage cost, highest access and rehydration costs
- Can take hours to rehydrate
- Examples: long-term backups, compliance archives

## Blob Container Access Levels

Understanding access control is crucial for the exam.

**Private Access** (default):
- No anonymous access
- Authentication required
- This is the secure default - remember this for exam scenarios about security

**Blob-Level Access**:
- Anonymous read access to individual blobs
- Users need the exact blob URL
- Cannot list container contents

**Container-Level Access**:
- Anonymous read access to the entire container
- Users can list all blobs in the container
- Highest level of public access

Exam tip: Questions often present security scenarios. Remember that private is the default and most secure option.

## Storage Account Security

Security is a major focus area for AZ-204. Know these features:

**Network Security**:
- Storage account firewalls allow restricting access by IP address or virtual network
- Service endpoints enable private network access from Azure virtual networks
- Private endpoints provide a private IP address in your VNet

**Shared Access Signatures - SAS**:
- Provides delegated access to storage resources
- Can limit permissions, resource types, and time duration
- Three types: User delegation SAS, Service SAS, Account SAS
- Exam tip: User delegation SAS is the most secure as it uses Azure AD credentials

**Access Keys**:
- Every storage account has two access keys
- Provide full access to the storage account
- Should be rotated regularly
- Never embed in client applications

**Azure AD Integration**:
- Preferred authentication method for applications
- Uses managed identities when possible
- Supports role-based access control

## Programmatic Access Patterns

The AZ-204 exam is developer-focused, so expect questions about using storage in code.

**Azure Storage SDK**:
- Available for multiple languages
- Use BlobServiceClient to interact with storage
- BlobContainerClient for container operations
- BlobClient for individual blob operations

**Common Operations**:
```
# Creating a blob client
BlobServiceClient serviceClient = new BlobServiceClient(connectionString);
BlobContainerClient containerClient = serviceClient.GetBlobContainerClient(containerName);
BlobClient blobClient = containerClient.GetBlobClient(blobName);

# Upload operation
blobClient.Upload(stream, overwrite: true);

# Download operation
blobClient.DownloadTo(stream);

# Set metadata
blobClient.SetMetadata(metadata);
```

**Important SDK Concepts**:
- Connection strings should come from configuration, not hard-coded
- Use managed identities instead of connection strings when possible
- Implement retry policies for transient failures
- Use async methods for better performance

## Unmanaged vs Managed Disks

The exam may include scenarios about VM disk storage.

**Managed Disks** (default and recommended):
- Azure manages the storage account
- Easier to manage and scale
- Better availability with availability sets
- No storage account limits to worry about

**Unmanaged Disks** (legacy):
- You manage the storage account
- Stored as page blobs in your storage account
- Limited by storage account IOPS limits
- Used when you need specific storage control

Exam tip: Unless there's a specific reason stated, always choose managed disks in exam scenarios.

## Performance Considerations

Know these performance concepts for the exam:

**IOPS Limits**:
- Standard storage accounts have IOPS limits
- Premium storage offers higher and more predictable IOPS
- Understand when to recommend Premium

**Partitioning**:
- Blob storage uses partition keys for scale
- The blob path is the partition key
- Design for parallel access patterns

**CDN Integration**:
- Use Azure CDN for globally distributed read access
- Reduces load on storage account
- Improves latency for end users

## Best Practices for AZ-204

When answering exam questions, keep these principles in mind:

1. **Security First**: Choose private access by default, use Azure AD when possible
2. **Cost Optimization**: Match access tiers to usage patterns
3. **Availability**: Select redundancy based on RTO and RPO requirements
4. **Performance**: Use Premium storage for low-latency requirements
5. **Monitoring**: Enable diagnostic logs and metrics
6. **Lifecycle Management**: Use policies to move data between tiers automatically

## Common Exam Scenarios

Watch for these scenario types on the exam:

**Scenario: "A web application needs to store user-uploaded images"**
- Answer: Use blob storage with appropriate access tier
- Consider: Security (private or blob-level access), CDN for distribution

**Scenario: "Backup data must be retained for 7 years"**
- Answer: Archive tier blob storage
- Consider: Access patterns, rehydration time acceptable for restores

**Scenario: "Application in multiple regions must always be able to read data"**
- Answer: RA-GRS or RA-GZRS
- Consider: Read access to secondary region without failover

**Scenario: "Temporary access to a blob for an external partner"**
- Answer: Generate a SAS token with limited duration and permissions
- Consider: User delegation SAS for better security

## Summary

To succeed on storage questions in the AZ-204 exam:

- Know redundancy options and when to use each
- Understand access tiers and their cost implications
- Master blob access levels and security options
- Be familiar with the storage SDK and common patterns
- Recognize scenarios requiring specific configurations

Practice creating storage accounts, uploading blobs, configuring security, and generating SAS tokens. The more hands-on experience you have, the better you'll perform on the exam.

Good luck with your AZ-204 preparation!
